var Pe=Object.defineProperty;var Re=(e,t,o)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var $=(e,t,o)=>(Re(e,typeof t!="symbol"?t+"":t,o),o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const _ of u)if(_.type==="childList")for(const f of _.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function o(u){const _={};return u.integrity&&(_.integrity=u.integrity),u.referrerPolicy&&(_.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?_.credentials="include":u.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function r(u){if(u.ep)return;u.ep=!0;const _=o(u);fetch(u.href,_)}})();function K(){}function qe(e,t){for(const o in t)e[o]=t[o];return e}function de(e){return e()}function se(){return Object.create(null)}function H(e){e.forEach(de)}function be(e){return typeof e=="function"}function W(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let U;function ee(e,t){return e===t?!0:(U||(U=document.createElement("a")),U.href=t,e===U.href)}function Ce(e){return Object.keys(e).length===0}function Ie(e,...t){if(e==null){for(const r of t)r(void 0);return K}const o=e.subscribe(...t);return o.unsubscribe?()=>o.unsubscribe():o}function Fe(e,t,o){e.$$.on_destroy.push(Ie(t,o))}function Je(e,t,o,r){if(e){const u=pe(e,t,o,r);return e[0](u)}}function pe(e,t,o,r){return e[1]&&r?qe(o.ctx.slice(),e[1](r(t))):o.ctx}function Qe(e,t,o,r){if(e[2]&&r){const u=e[2](r(o));if(t.dirty===void 0)return u;if(typeof u=="object"){const _=[],f=Math.max(t.dirty.length,u.length);for(let i=0;i<f;i+=1)_[i]=t.dirty[i]|u[i];return _}return t.dirty|u}return t.dirty}function ze(e,t,o,r,u,_){if(u){const f=pe(t,o,r,_);e.p(f,u)}}function He(e){if(e.ctx.length>32){const t=[],o=e.ctx.length/32;for(let r=0;r<o;r++)t[r]=-1;return t}return-1}function A(e,t){e.appendChild(t)}function j(e,t,o){e.insertBefore(t,o||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function Ge(e,t){for(let o=0;o<e.length;o+=1)e[o]&&e[o].d(t)}function N(e){return document.createElement(e)}function D(e){return document.createTextNode(e)}function Q(){return D(" ")}function ie(){return D("")}function re(e,t,o,r){return e.addEventListener(t,o,r),()=>e.removeEventListener(t,o,r)}function v(e,t,o){o==null?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function Te(e){return Array.from(e.childNodes)}let fe;function z(e){fe=e}const F=[],w=[];let J=[];const te=[],Ue=Promise.resolve();let oe=!1;function Ve(){oe||(oe=!0,Ue.then(ye))}function ne(e){J.push(e)}function M(e){te.push(e)}const x=new Set;let C=0;function ye(){if(C!==0)return;const e=fe;do{try{for(;C<F.length;){const t=F[C];C++,z(t),We(t.$$)}}catch(t){throw F.length=0,C=0,t}for(z(null),F.length=0,C=0;w.length;)w.pop()();for(let t=0;t<J.length;t+=1){const o=J[t];x.has(o)||(x.add(o),o())}J.length=0}while(F.length);for(;te.length;)te.pop()();oe=!1,x.clear(),z(e)}function We(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ne)}}function De(e){const t=[],o=[];J.forEach(r=>e.indexOf(r)===-1?t.push(r):o.push(r)),o.forEach(r=>r()),J=t}const V=new Set;let q;function G(){q={r:0,c:[],p:q}}function T(){q.r||H(q.c),q=q.p}function p(e,t){e&&e.i&&(V.delete(e),e.i(t))}function y(e,t,o,r){if(e&&e.o){if(V.has(e))return;V.add(e),q.c.push(()=>{V.delete(e),r&&(o&&e.d(1),r())}),e.o(t)}else r&&r()}function _e(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function E(e,t,o){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=o,o(e.$$.ctx[r]))}function R(e){e&&e.c()}function L(e,t,o){const{fragment:r,after_update:u}=e.$$;r&&r.m(t,o),ne(()=>{const _=e.$$.on_mount.map(de).filter(be);e.$$.on_destroy?e.$$.on_destroy.push(..._):H(_),e.$$.on_mount=[]}),u.forEach(ne)}function P(e,t){const o=e.$$;o.fragment!==null&&(De(o.after_update),H(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function Xe(e,t){e.$$.dirty[0]===-1&&(F.push(e),Ve(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function le(e,t,o,r,u,_,f,i=[-1]){const s=fe;z(e);const a=e.$$={fragment:null,ctx:[],props:_,update:K,not_equal:u,bound:se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(s?s.$$.context:[])),callbacks:se(),dirty:i,skip_bound:!1,root:t.target||s.$$.root};f&&f(a.root);let n=!1;if(a.ctx=o?o(e,t.props||{},(l,h,...d)=>{const B=d.length?d[0]:h;return a.ctx&&u(a.ctx[l],a.ctx[l]=B)&&(!a.skip_bound&&a.bound[l]&&a.bound[l](B),n&&Xe(e,l)),h}):[],a.update(),n=!0,H(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const l=Te(t.target);a.fragment&&a.fragment.l(l),l.forEach(S)}else a.fragment&&a.fragment.c();t.intro&&p(e.$$.fragment),L(e,t.target,t.anchor),ye()}z(s)}class ue{constructor(){$(this,"$$");$(this,"$$set")}$destroy(){P(this,1),this.$destroy=K}$on(t,o){if(!be(o))return K;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(o),()=>{const u=r.indexOf(o);u!==-1&&r.splice(u,1)}}$set(t){this.$$set&&!Ce(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ye="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ye);function Ze(e){let t,o,r,u,_;return{c(){t=N("button"),o=N("img"),v(o,"class","figure-image svelte-1rysv6i"),ee(o.src,r=e[1]+e[0]+".png")||v(o,"src",r),v(o,"alt",""),v(t,"class","figure-button svelte-1rysv6i")},m(f,i){j(f,t,i),A(t,o),u||(_=re(t,"click",e[2]),u=!0)},p(f,[i]){i&3&&!ee(o.src,r=f[1]+f[0]+".png")&&v(o,"src",r)},i:K,o:K,d(f){f&&S(t),u=!1,_()}}}function $e(e,t,o){let r,{type:u}=t,{team:_}=t,{current_team:f}=t,{position:i={x:0,y:0}}=t,{field_array:s}=t,{move_to:a={bool:!1}}=t,{moved:n}=t,{own_team:l}=t,h=!1;function d(){if(f!=_||l!=_){console.log("cur: "+f+", team: "+_);return}h?m():B()}function B(){if(console.log("show highlight"),u=="King"){for(let g=-1;g<2;g++)b(-1,g);b(0,-1),b(0,1);for(let g=-1;g<2;g++)b(1,g)}else if(u=="Rook"){for(let g=-1;g>-8&&b(g,0)!=!1;g--);for(let g=1;g<8&&b(g,0)!=!1;g++);for(let g=-1;g>-8&&b(0,g)!=!1;g--);for(let g=1;g<8&&b(0,g)!=!1;g++);}else if(u=="Bishop"){for(let g=-1;g>-8&&b(g,g)!=!1;g--);for(let g=1;g<8&&b(g,g)!=!1;g++);for(let g=-1;g>-8&&b(-g,g)!=!1;g--);for(let g=1;g<8&&b(-g,g)!=!1;g++);}else if(u=="Queen"){for(let g=-1;g>-8&&b(g,g)!=!1;g--);for(let g=1;g<8&&b(g,g)!=!1;g++);for(let g=-1;g>-8&&b(-g,g)!=!1;g--);for(let g=1;g<8&&b(-g,g)!=!1;g++);for(let g=-1;g>-8&&b(g,0)!=!1;g--);for(let g=1;g<8&&b(g,0)!=!1;g++);for(let g=-1;g>-8&&b(0,g)!=!1;g--);for(let g=1;g<8&&b(0,g)!=!1;g++);}else u=="Knight"?(b(-2,-1),b(-2,1),b(2,-1),b(2,1),b(-1,-2),b(1,-2),b(-1,2),b(1,2)):b(-1,0)}function m(){Z(-1,0)}function b(g,O){return console.log("PLACE "+g+" "+O),i.y+g>=0&&i.y+g<=7&&i.x+O>=0&&i.x+O<=7?s[i.y+g][i.x+O].team==_?(console.log("own team!"),!1):(o(4,s[i.y+g][i.x+O].is_highlight=!0,s),o(4,s[i.y+g][i.x+O].origin=i,s),h=!0,!(s[i.y+g][i.x+O].team=="white"&&_=="black"||s[i.y+g][i.x+O].team=="black"&&_=="white")):(console.log("out of bounds!"),!1)}function Z(g,O){if(i.y+g>=0&&i.y+g<=8&&i.x+O>=0&&i.x+O<=8){if(s[i.y+g][i.x+O].team==_)return;o(4,s[i.y+g][i.x+O].is_highlight=!1,s),h=!1}}return e.$$set=g=>{"type"in g&&o(0,u=g.type),"team"in g&&o(6,_=g.team),"current_team"in g&&o(7,f=g.current_team),"position"in g&&o(8,i=g.position),"field_array"in g&&o(4,s=g.field_array),"move_to"in g&&o(3,a=g.move_to),"moved"in g&&o(5,n=g.moved),"own_team"in g&&o(9,l=g.own_team)},e.$$.update=()=>{e.$$.dirty&64&&o(1,r="/images/"+_+"-pixel/"),e.$$.dirty&329&&a.bool&&(o(3,a.bool=!1,a),console.log("move figure"),m(),o(4,s[i.y][i.x]={figure:"none",is_highlight:!1},s),o(4,s[a.pos.y][a.pos.x]={figure:u,team:_,move_to:{bool:!1},is_highlight:!1},s),o(5,n={bool:!0,old_pos:i,new_pos:a.pos}))},[u,r,d,a,s,n,_,f,i,l]}class X extends ue{constructor(t){super(),le(this,t,$e,Ze,W,{type:0,team:6,current_team:7,position:8,field_array:4,move_to:3,moved:5,own_team:9})}}function xe(e){let t,o,r,u,_,f,i;const s=e[5].default,a=Je(s,e,e[4],null);return{c(){t=N("button"),o=N("img"),u=Q(),a&&a.c(),v(o,"class","highlight-image svelte-1h4ejhx"),ee(o.src,r="/images/highlight.svg")||v(o,"src",r),v(o,"alt",""),v(t,"class","highlight-button svelte-1h4ejhx")},m(n,l){j(n,t,l),A(t,o),A(t,u),a&&a.m(t,null),_=!0,f||(i=re(t,"click",e[0]),f=!0)},p(n,[l]){a&&a.p&&(!_||l&16)&&ze(a,s,n,n[4],_?Qe(s,n[4],l,null):He(n[4]),null)},i(n){_||(p(a,n),_=!0)},o(n){y(a,n),_=!1},d(n){n&&S(t),a&&a.d(n),f=!1,i()}}}function et(e,t,o){let{$$slots:r={},$$scope:u}=t,{origin:_={x:0,y:0}}=t,{field_array:f}=t,{position:i}=t;function s(){o(1,f[_.y][_.x].move_to={bool:!0,pos:i},f),o(1,f),console.log("move from ")}return e.$$set=a=>{"origin"in a&&o(2,_=a.origin),"field_array"in a&&o(1,f=a.field_array),"position"in a&&o(3,i=a.position),"$$scope"in a&&o(4,u=a.$$scope)},[s,f,_,i,u,r]}class Y extends ue{constructor(t){super(),le(this,t,et,xe,W,{origin:2,field_array:1,position:3})}}const I=[];function tt(e,t=K){let o;const r=new Set;function u(i){if(W(e,i)&&(e=i,o)){const s=!I.length;for(const a of r)a[1](),I.push(a,e);if(s){for(let a=0;a<I.length;a+=2)I[a][0](I[a+1]);I.length=0}}}function _(i){u(i(e))}function f(i,s=K){const a=[i,s];return r.add(a),r.size===1&&(o=t(u,_)||K),i(e),()=>{r.delete(a),r.size===0&&o&&(o(),o=null)}}return{set:u,update:_,subscribe:f}}const ot=()=>{let e=new WebSocket("ws://localhost:9000/ws");const t=tt(0),o=()=>t,r=u=>{console.log("send"),e.send(u)};return e.onmessage=function(u){t.set(u.data)},{getResponse:o,sendMessage:r}};function ae(e,t,o){const r=e.slice();return r[32]=t[o],r[34]=o,r}function nt(e){let t,o,r,u,_,f,i;const s=[lt,ft,rt],a=[];function n(l,h){return h[0]&16&&(o=null),h[0]&16&&(r=null),o==null&&(o=l[4][Math.floor(l[34]/8)][l[34]%8].figure=="none"),o?0:(r==null&&(r=!!l[4][Math.floor(l[34]/8)][l[34]%8].is_highlight),r?1:2)}return u=n(e,[-1,-1]),_=a[u]=s[u](e),{c(){t=N("div"),_.c(),f=Q(),v(t,"class","square-odd svelte-9e2cii")},m(l,h){j(l,t,h),a[u].m(t,null),A(t,f),i=!0},p(l,h){let d=u;u=n(l,h),u===d?a[u].p(l,h):(G(),y(a[d],1,1,()=>{a[d]=null}),T(),_=a[u],_?_.p(l,h):(_=a[u]=s[u](l),_.c()),p(_,1),_.m(t,f))},i(l){i||(p(_),i=!0)},o(l){y(_),i=!1},d(l){l&&S(t),a[u].d()}}}function it(e){let t,o,r,u,_,f,i;const s=[at,_t,st],a=[];function n(l,h){return h[0]&16&&(o=null),h[0]&16&&(r=null),o==null&&(o=l[4][Math.floor(l[34]/8)][l[34]%8].figure=="none"),o?0:(r==null&&(r=!!l[4][Math.floor(l[34]/8)][l[34]%8].is_highlight),r?1:2)}return u=n(e,[-1,-1]),_=a[u]=s[u](e),{c(){t=N("div"),_.c(),f=Q(),v(t,"class","square-even svelte-9e2cii")},m(l,h){j(l,t,h),a[u].m(t,null),A(t,f),i=!0},p(l,h){let d=u;u=n(l,h),u===d?a[u].p(l,h):(G(),y(a[d],1,1,()=>{a[d]=null}),T(),_=a[u],_?_.p(l,h):(_=a[u]=s[u](l),_.c()),p(_,1),_.m(t,f))},i(l){i||(p(_),i=!0)},o(l){y(_),i=!1},d(l){l&&S(t),a[u].d()}}}function rt(e){let t,o,r,u,_;function f(n){e[22](n)}function i(n){e[23](n)}function s(n){e[24](n)}let a={type:e[4][Math.floor(e[34]/8)][e[34]%8].figure,team:e[4][Math.floor(e[34]/8)][e[34]%8].team,position:{x:e[34]%8,y:Math.floor(e[34]/8)},move_to:e[4][Math.floor(e[34]/8)][e[34]%8].move_to,own_team:e[0]};return e[1]!==void 0&&(a.current_team=e[1]),e[4]!==void 0&&(a.field_array=e[4]),e[2]!==void 0&&(a.moved=e[2]),t=new X({props:a}),w.push(()=>E(t,"current_team",f)),w.push(()=>E(t,"field_array",i)),w.push(()=>E(t,"moved",s)),{c(){R(t.$$.fragment)},m(n,l){L(t,n,l),_=!0},p(n,l){const h={};l[0]&16&&(h.type=n[4][Math.floor(n[34]/8)][n[34]%8].figure),l[0]&16&&(h.team=n[4][Math.floor(n[34]/8)][n[34]%8].team),l[0]&16&&(h.move_to=n[4][Math.floor(n[34]/8)][n[34]%8].move_to),l[0]&1&&(h.own_team=n[0]),!o&&l[0]&2&&(o=!0,h.current_team=n[1],M(()=>o=!1)),!r&&l[0]&16&&(r=!0,h.field_array=n[4],M(()=>r=!1)),!u&&l[0]&4&&(u=!0,h.moved=n[2],M(()=>u=!1)),t.$set(h)},i(n){_||(p(t.$$.fragment,n),_=!0)},o(n){y(t.$$.fragment,n),_=!1},d(n){P(t,n)}}}function ft(e){let t,o,r;function u(f){e[21](f)}let _={origin:e[4][Math.floor(e[34]/8)][e[34]%8].origin,position:{x:e[34]%8,y:Math.floor(e[34]/8)},$$slots:{default:[ut]},$$scope:{ctx:e}};return e[4]!==void 0&&(_.field_array=e[4]),t=new Y({props:_}),w.push(()=>E(t,"field_array",u)),{c(){R(t.$$.fragment)},m(f,i){L(t,f,i),r=!0},p(f,i){const s={};i[0]&16&&(s.origin=f[4][Math.floor(f[34]/8)][f[34]%8].origin),i[0]&23|i[1]&16&&(s.$$scope={dirty:i,ctx:f}),!o&&i[0]&16&&(o=!0,s.field_array=f[4],M(()=>o=!1)),t.$set(s)},i(f){r||(p(t.$$.fragment,f),r=!0)},o(f){y(t.$$.fragment,f),r=!1},d(f){P(t,f)}}}function lt(e){let t="",o,r,u=e[4][Math.floor(e[34]/8)][e[34]%8].is_highlight,_,f,i=u&&ge(e);return{c(){o=D(t),r=Q(),i&&i.c(),_=ie()},m(s,a){j(s,o,a),j(s,r,a),i&&i.m(s,a),j(s,_,a),f=!0},p(s,a){a[0]&16&&(u=s[4][Math.floor(s[34]/8)][s[34]%8].is_highlight),u?i?(i.p(s,a),a[0]&16&&p(i,1)):(i=ge(s),i.c(),p(i,1),i.m(_.parentNode,_)):i&&(G(),y(i,1,1,()=>{i=null}),T())},i(s){f||(p(i),f=!0)},o(s){y(i),f=!1},d(s){s&&(S(o),S(r),S(_)),i&&i.d(s)}}}function ut(e){let t,o,r,u,_;function f(n){e[18](n)}function i(n){e[19](n)}function s(n){e[20](n)}let a={type:e[4][Math.floor(e[34]/8)][e[34]%8].figure,team:e[4][Math.floor(e[34]/8)][e[34]%8].team,position:{x:e[34]%8,y:Math.floor(e[34]/8)},move_to:e[4][Math.floor(e[34]/8)][e[34]%8].move_to,own_team:e[0]};return e[1]!==void 0&&(a.current_team=e[1]),e[4]!==void 0&&(a.field_array=e[4]),e[2]!==void 0&&(a.moved=e[2]),t=new X({props:a}),w.push(()=>E(t,"current_team",f)),w.push(()=>E(t,"field_array",i)),w.push(()=>E(t,"moved",s)),{c(){R(t.$$.fragment)},m(n,l){L(t,n,l),_=!0},p(n,l){const h={};l[0]&16&&(h.type=n[4][Math.floor(n[34]/8)][n[34]%8].figure),l[0]&16&&(h.team=n[4][Math.floor(n[34]/8)][n[34]%8].team),l[0]&16&&(h.move_to=n[4][Math.floor(n[34]/8)][n[34]%8].move_to),l[0]&1&&(h.own_team=n[0]),!o&&l[0]&2&&(o=!0,h.current_team=n[1],M(()=>o=!1)),!r&&l[0]&16&&(r=!0,h.field_array=n[4],M(()=>r=!1)),!u&&l[0]&4&&(u=!0,h.moved=n[2],M(()=>u=!1)),t.$set(h)},i(n){_||(p(t.$$.fragment,n),_=!0)},o(n){y(t.$$.fragment,n),_=!1},d(n){P(t,n)}}}function ge(e){let t,o,r;function u(f){e[17](f)}let _={origin:e[4][Math.floor(e[34]/8)][e[34]%8].origin,position:{x:e[34]%8,y:Math.floor(e[34]/8)}};return e[4]!==void 0&&(_.field_array=e[4]),t=new Y({props:_}),w.push(()=>E(t,"field_array",u)),{c(){R(t.$$.fragment)},m(f,i){L(t,f,i),r=!0},p(f,i){const s={};i[0]&16&&(s.origin=f[4][Math.floor(f[34]/8)][f[34]%8].origin),!o&&i[0]&16&&(o=!0,s.field_array=f[4],M(()=>o=!1)),t.$set(s)},i(f){r||(p(t.$$.fragment,f),r=!0)},o(f){y(t.$$.fragment,f),r=!1},d(f){P(t,f)}}}function st(e){let t,o,r,u,_;function f(n){e[14](n)}function i(n){e[15](n)}function s(n){e[16](n)}let a={type:e[4][Math.floor(e[34]/8)][e[34]%8].figure,team:e[4][Math.floor(e[34]/8)][e[34]%8].team,position:{x:e[34]%8,y:Math.floor(e[34]/8)},move_to:e[4][Math.floor(e[34]/8)][e[34]%8].move_to,own_team:e[0]};return e[1]!==void 0&&(a.current_team=e[1]),e[4]!==void 0&&(a.field_array=e[4]),e[2]!==void 0&&(a.moved=e[2]),t=new X({props:a}),w.push(()=>E(t,"current_team",f)),w.push(()=>E(t,"field_array",i)),w.push(()=>E(t,"moved",s)),{c(){R(t.$$.fragment)},m(n,l){L(t,n,l),_=!0},p(n,l){const h={};l[0]&16&&(h.type=n[4][Math.floor(n[34]/8)][n[34]%8].figure),l[0]&16&&(h.team=n[4][Math.floor(n[34]/8)][n[34]%8].team),l[0]&16&&(h.move_to=n[4][Math.floor(n[34]/8)][n[34]%8].move_to),l[0]&1&&(h.own_team=n[0]),!o&&l[0]&2&&(o=!0,h.current_team=n[1],M(()=>o=!1)),!r&&l[0]&16&&(r=!0,h.field_array=n[4],M(()=>r=!1)),!u&&l[0]&4&&(u=!0,h.moved=n[2],M(()=>u=!1)),t.$set(h)},i(n){_||(p(t.$$.fragment,n),_=!0)},o(n){y(t.$$.fragment,n),_=!1},d(n){P(t,n)}}}function _t(e){let t,o,r;function u(f){e[13](f)}let _={origin:e[4][Math.floor(e[34]/8)][e[34]%8].origin,position:{x:e[34]%8,y:Math.floor(e[34]/8)},$$slots:{default:[gt]},$$scope:{ctx:e}};return e[4]!==void 0&&(_.field_array=e[4]),t=new Y({props:_}),w.push(()=>E(t,"field_array",u)),{c(){R(t.$$.fragment)},m(f,i){L(t,f,i),r=!0},p(f,i){const s={};i[0]&16&&(s.origin=f[4][Math.floor(f[34]/8)][f[34]%8].origin),i[0]&23|i[1]&16&&(s.$$scope={dirty:i,ctx:f}),!o&&i[0]&16&&(o=!0,s.field_array=f[4],M(()=>o=!1)),t.$set(s)},i(f){r||(p(t.$$.fragment,f),r=!0)},o(f){y(t.$$.fragment,f),r=!1},d(f){P(t,f)}}}function at(e){let t="",o,r,u=e[4][Math.floor(e[34]/8)][e[34]%8].is_highlight,_,f,i=u&&he(e);return{c(){o=D(t),r=Q(),i&&i.c(),_=ie()},m(s,a){j(s,o,a),j(s,r,a),i&&i.m(s,a),j(s,_,a),f=!0},p(s,a){a[0]&16&&(u=s[4][Math.floor(s[34]/8)][s[34]%8].is_highlight),u?i?(i.p(s,a),a[0]&16&&p(i,1)):(i=he(s),i.c(),p(i,1),i.m(_.parentNode,_)):i&&(G(),y(i,1,1,()=>{i=null}),T())},i(s){f||(p(i),f=!0)},o(s){y(i),f=!1},d(s){s&&(S(o),S(r),S(_)),i&&i.d(s)}}}function gt(e){let t,o,r,u,_;function f(n){e[10](n)}function i(n){e[11](n)}function s(n){e[12](n)}let a={type:e[4][Math.floor(e[34]/8)][e[34]%8].figure,team:e[4][Math.floor(e[34]/8)][e[34]%8].team,position:{x:e[34]%8,y:Math.floor(e[34]/8)},move_to:e[4][Math.floor(e[34]/8)][e[34]%8].move_to,own_team:e[0]};return e[1]!==void 0&&(a.current_team=e[1]),e[4]!==void 0&&(a.field_array=e[4]),e[2]!==void 0&&(a.moved=e[2]),t=new X({props:a}),w.push(()=>E(t,"current_team",f)),w.push(()=>E(t,"field_array",i)),w.push(()=>E(t,"moved",s)),{c(){R(t.$$.fragment)},m(n,l){L(t,n,l),_=!0},p(n,l){const h={};l[0]&16&&(h.type=n[4][Math.floor(n[34]/8)][n[34]%8].figure),l[0]&16&&(h.team=n[4][Math.floor(n[34]/8)][n[34]%8].team),l[0]&16&&(h.move_to=n[4][Math.floor(n[34]/8)][n[34]%8].move_to),l[0]&1&&(h.own_team=n[0]),!o&&l[0]&2&&(o=!0,h.current_team=n[1],M(()=>o=!1)),!r&&l[0]&16&&(r=!0,h.field_array=n[4],M(()=>r=!1)),!u&&l[0]&4&&(u=!0,h.moved=n[2],M(()=>u=!1)),t.$set(h)},i(n){_||(p(t.$$.fragment,n),_=!0)},o(n){y(t.$$.fragment,n),_=!1},d(n){P(t,n)}}}function he(e){let t,o,r;function u(f){e[9](f)}let _={origin:e[4][Math.floor(e[34]/8)][e[34]%8].origin,position:{x:e[34]%8,y:Math.floor(e[34]/8)}};return e[4]!==void 0&&(_.field_array=e[4]),t=new Y({props:_}),w.push(()=>E(t,"field_array",u)),{c(){R(t.$$.fragment)},m(f,i){L(t,f,i),r=!0},p(f,i){const s={};i[0]&16&&(s.origin=f[4][Math.floor(f[34]/8)][f[34]%8].origin),!o&&i[0]&16&&(o=!0,s.field_array=f[4],M(()=>o=!1)),t.$set(s)},i(f){r||(p(t.$$.fragment,f),r=!0)},o(f){y(t.$$.fragment,f),r=!1},d(f){P(t,f)}}}function ce(e){let t,o,r,u;const _=[it,nt],f=[];function i(s,a){return(s[34]+Math.floor(s[34]/8))%2==0?0:1}return t=i(e),o=f[t]=_[t](e),{c(){o.c(),r=ie()},m(s,a){f[t].m(s,a),j(s,r,a),u=!0},p(s,a){o.p(s,a)},i(s){u||(p(o),u=!0)},o(s){y(o),u=!1},d(s){s&&S(r),f[t].d(s)}}}function me(e){let t,o,r,u,_;return{c(){t=N("div"),o=N("div"),r=N("button"),r.textContent="Join",v(r,"class","overlay-text svelte-9e2cii"),v(o,"class","overlay-container svelte-9e2cii"),v(t,"class","GameOverScreen svelte-9e2cii")},m(f,i){j(f,t,i),A(t,o),A(o,r),u||(_=re(r,"click",e[25]),u=!0)},p:K,d(f){f&&S(t),u=!1,_()}}}function ht(e){let t,o,r,u,_,f,i=_e({length:64}),s=[];for(let l=0;l<i.length;l+=1)s[l]=ce(ae(e,i,l));const a=l=>y(s[l],1,1,()=>{s[l]=null});let n=e[3]&&me(e);return{c(){t=N("main"),o=N("div"),r=N("div");for(let l=0;l<s.length;l+=1)s[l].c();u=Q(),_=N("div"),n&&n.c(),v(r,"class","chess-board svelte-9e2cii"),v(o,"class","board-container svelte-9e2cii")},m(l,h){j(l,t,h),A(t,o),A(o,r);for(let d=0;d<s.length;d+=1)s[d]&&s[d].m(r,null);A(t,u),A(t,_),n&&n.m(_,null),f=!0},p(l,h){if(h[0]&23){i=_e({length:64});let d;for(d=0;d<i.length;d+=1){const B=ae(l,i,d);s[d]?(s[d].p(B,h),p(s[d],1)):(s[d]=ce(B),s[d].c(),p(s[d],1),s[d].m(r,null))}for(G(),d=i.length;d<s.length;d+=1)a(d);T()}l[3]?n?n.p(l,h):(n=me(l),n.c(),n.m(_,null)):n&&(n.d(1),n=null)},i(l){if(!f){for(let h=0;h<i.length;h+=1)p(s[h]);f=!0}},o(l){s=s.filter(Boolean);for(let h=0;h<s.length;h+=1)y(s[h]);f=!1},d(l){l&&S(t),Ge(s,l),n&&n.d()}}}function ct(e,t,o){let r,u;const _=ot(),f=_.getResponse();Fe(e,f,c=>o(8,u=c));let i;function s(c){if(console.log("message: "+c),c=="black")o(0,i="black"),d("black"),B("white");else if(c=="white")o(0,i="white"),d("white"),B("black");else if(c!="none")if(c==0)console.log("0");else{let k=JSON.parse(c);console.log("move enemy"),i!=k.team&&(console.log(k),o(4,m[k.old_pos.y][k.old_pos.x].move_to={bool:!0,pos:k.new_pos},m),o(4,m))}}let a=!0,n="white",l={bool:!1,old_pos:{y:0,x:0},new_pos:{y:0,x:0}};function h(c){c=="which team"&&o(3,a=!1),_.sendMessage(c)}function d(c){for(let k=0;k<8;k++)o(4,m[6][k]={figure:"Pawn",team:c,move_to:{bool:!1}},m);o(4,m[7][0]={figure:"Rook",team:c,move_to:{bool:!1}},m),o(4,m[7][7]={figure:"Rook",team:c,move_to:{bool:!1}},m),o(4,m[7][1]={figure:"Knight",team:c,move_to:{bool:!1}},m),o(4,m[7][6]={figure:"Knight",team:c,move_to:{bool:!1}},m),o(4,m[7][2]={figure:"Bishop",team:c,move_to:{bool:!1}},m),o(4,m[7][5]={figure:"Bishop",team:c,move_to:{bool:!1}},m),o(4,m[7][3]={figure:"Queen",team:c,move_to:{bool:!1}},m),o(4,m[7][4]={figure:"King",team:c,move_to:{bool:!1}},m)}function B(c){for(let k=0;k<8;k++)o(4,m[1][k]={figure:"Pawn",team:c,move_to:{bool:!1}},m);o(4,m[0][0]={figure:"Rook",team:c,move_to:{bool:!1}},m),o(4,m[0][7]={figure:"Rook",team:c,move_to:{bool:!1}},m),o(4,m[0][1]={figure:"Knight",team:c,move_to:{bool:!1}},m),o(4,m[0][6]={figure:"Knight",team:c,move_to:{bool:!1}},m),o(4,m[0][2]={figure:"Bishop",team:c,move_to:{bool:!1}},m),o(4,m[0][5]={figure:"Bishop",team:c,move_to:{bool:!1}},m),o(4,m[0][3]={figure:"Queen",team:c,move_to:{bool:!1}},m),o(4,m[0][4]={figure:"King",team:c,move_to:{bool:!1}},m)}let m=[];for(let c=0;c<8;c++){m.push([]);for(let k=0;k<8;k++)m[c].push({figure:"none",move_to:{bool:!1},is_highlight:!1})}m=m;function b(c){m=c,o(4,m)}function Z(c){n=c,o(1,n),o(2,l),o(0,i)}function g(c){m=c,o(4,m)}function O(c){l=c,o(2,l),o(0,i),o(1,n)}function we(c){m=c,o(4,m)}function ke(c){n=c,o(1,n),o(2,l),o(0,i)}function ve(c){m=c,o(4,m)}function Me(c){l=c,o(2,l),o(0,i),o(1,n)}function Ee(c){m=c,o(4,m)}function Oe(c){n=c,o(1,n),o(2,l),o(0,i)}function Se(c){m=c,o(4,m)}function Ne(c){l=c,o(2,l),o(0,i),o(1,n)}function je(c){m=c,o(4,m)}function Ae(c){n=c,o(1,n),o(2,l),o(0,i)}function Be(c){m=c,o(4,m)}function Ke(c){l=c,o(2,l),o(0,i),o(1,n)}const Le=()=>h("which team");return e.$$.update=()=>{if(e.$$.dirty[0]&256&&o(7,r=u.toString()),e.$$.dirty[0]&128&&s(r),e.$$.dirty[0]&7&&l.bool){console.log("moved");let c=JSON.stringify({team:i,old_pos:{y:Math.abs(l.old_pos.y-7),x:Math.abs(l.old_pos.x-7)},new_pos:{y:Math.abs(l.new_pos.y-7),x:Math.abs(l.new_pos.x-7)}});h(c),n=="white"?o(1,n="black"):n=="black"&&o(1,n="white"),o(2,l.bool=!1,l)}},[i,n,l,a,m,f,h,r,u,b,Z,g,O,we,ke,ve,Me,Ee,Oe,Se,Ne,je,Ae,Be,Ke,Le]}class mt extends ue{constructor(t){super(),le(this,t,ct,ht,W,{},null,[-1,-1])}}new mt({target:document.getElementById("app")});
