var ge=Object.defineProperty;var he=(e,t,n)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var T=(e,t,n)=>(he(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))r(f);new MutationObserver(f=>{for(const s of f)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(f){const s={};return f.integrity&&(s.integrity=f.integrity),f.referrerPolicy&&(s.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?s.credentials="include":f.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(f){if(f.ep)return;f.ep=!0;const s=n(f);fetch(f.href,s)}})();function d(){}function fe(e){return e()}function ee(){return Object.create(null)}function q(e){e.forEach(fe)}function le(e){return typeof e=="function"}function I(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let K;function te(e,t){return e===t?!0:(K||(K=document.createElement("a")),K.href=t,e===K.href)}function de(e){return Object.keys(e).length===0}function me(e,...t){if(e==null){for(const r of t)r(void 0);return d}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function pe(e,t,n){e.$$.on_destroy.push(me(t,n))}function k(e,t){e.appendChild(t)}function M(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode&&e.parentNode.removeChild(e)}function be(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function b(e){return document.createElement(e)}function F(e){return document.createTextNode(e)}function W(){return F(" ")}function ye(){return F("")}function D(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ve(e){return Array.from(e.childNodes)}let X;function N(e){X=e}const P=[],A=[];let j=[];const J=[],we=Promise.resolve();let U=!1;function ke(){U||(U=!0,we.then(se))}function V(e){j.push(e)}function H(e){J.push(e)}const G=new Set;let S=0;function se(){if(S!==0)return;const e=X;do{try{for(;S<P.length;){const t=P[S];S++,N(t),Me(t.$$)}}catch(t){throw P.length=0,S=0,t}for(N(null),P.length=0,S=0;A.length;)A.pop()();for(let t=0;t<j.length;t+=1){const n=j[t];G.has(n)||(G.add(n),n())}j.length=0}while(P.length);for(;J.length;)J.pop()();U=!1,G.clear(),N(e)}function Me(e){if(e.fragment!==null){e.update(),q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(V)}}function Ee(e){const t=[],n=[];j.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),j=t}const R=new Set;let O;function Y(){O={r:0,c:[],p:O}}function Z(){O.r||q(O.c),O=O.p}function p(e,t){e&&e.i&&(R.delete(e),e.i(t))}function y(e,t,n,r){if(e&&e.o){if(R.has(e))return;R.add(e),O.c.push(()=>{R.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function ne(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function z(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Q(e){e&&e.c()}function B(e,t,n){const{fragment:r,after_update:f}=e.$$;r&&r.m(t,n),V(()=>{const s=e.$$.on_mount.map(fe).filter(le);e.$$.on_destroy?e.$$.on_destroy.push(...s):q(s),e.$$.on_mount=[]}),f.forEach(V)}function C(e,t){const n=e.$$;n.fragment!==null&&(Ee(n.after_update),q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Oe(e,t){e.$$.dirty[0]===-1&&(P.push(e),ke(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function $(e,t,n,r,f,s,o,u=[-1]){const l=X;N(e);const c=e.$$={fragment:null,ctx:[],props:s,update:d,not_equal:f,bound:ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:ee(),dirty:u,skip_bound:!1,root:t.target||l.$$.root};o&&o(c.root);let h=!1;if(c.ctx=n?n(e,t.props||{},(i,_,...a)=>{const E=a.length?a[0]:_;return c.ctx&&f(c.ctx[i],c.ctx[i]=E)&&(!c.skip_bound&&c.bound[i]&&c.bound[i](E),h&&Oe(e,i)),_}):[],c.update(),h=!0,q(c.before_update),c.fragment=r?r(c.ctx):!1,t.target){if(t.hydrate){const i=ve(t.target);c.fragment&&c.fragment.l(i),i.forEach(w)}else c.fragment&&c.fragment.c();t.intro&&p(e.$$.fragment),B(e,t.target,t.anchor),se()}N(l)}class x{constructor(){T(this,"$$");T(this,"$$set")}$destroy(){C(this,1),this.$destroy=d}$on(t,n){if(!le(n))return d;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const f=r.indexOf(n);f!==-1&&r.splice(f,1)}}$set(t){this.$$set&&!de(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Se="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Se);function Le(e){let t,n,r,f,s;return{c(){t=b("button"),n=b("img"),m(n,"class","figure-image svelte-18fxro0"),te(n.src,r=e[1]+e[0]+".png")||m(n,"src",r),m(n,"alt",""),m(t,"class","figure-button svelte-18fxro0")},m(o,u){M(o,t,u),k(t,n),f||(s=D(t,"click",e[2]),f=!0)},p(o,[u]){u&3&&!te(n.src,r=o[1]+o[0]+".png")&&m(n,"src",r)},i:d,o:d,d(o){o&&w(t),f=!1,s()}}}function Pe(e,t,n){let r,{type:f}=t,{team:s}=t,{position:o={x:0,y:0}}=t,{field_array:u}=t,{move_to:l={bool:!1}}=t,c=!1;function h(){c?(_(),c=!1):(i(),c=!0)}function i(){console.log("show highlight"),o.y-1>=0&&n(4,u[o.y-1][o.x]={figure:"highlight",origin:o},u)}function _(){o.y-1>=0&&n(4,u[o.y-1][o.x]={figure:"none"},u)}return e.$$set=a=>{"type"in a&&n(0,f=a.type),"team"in a&&n(5,s=a.team),"position"in a&&n(6,o=a.position),"field_array"in a&&n(4,u=a.field_array),"move_to"in a&&n(3,l=a.move_to)},e.$$.update=()=>{e.$$.dirty&73&&l.bool&&(n(3,l.bool=!1,l),_(),console.log(o),n(4,u[o.y][o.x]={figure:"none"},u),n(4,u[l.pos.y][l.pos.x]={figure:f,move_to:{bool:!1}},u)),e.$$.dirty&8&&console.log(l),e.$$.dirty&32&&n(1,r="/images/"+s+"-pixel/")},[f,r,h,l,u,s,o]}class ue extends x{constructor(t){super(),$(this,t,Pe,Le,I,{type:0,team:5,position:6,field_array:4,move_to:3})}}function je(e){let t,n,r;return{c(){t=b("button"),t.innerHTML='<img class="highlight-image svelte-b8j78b" src="/images/highlight.svg" alt=""/>',m(t,"class","highlight-button svelte-b8j78b")},m(f,s){M(f,t,s),n||(r=D(t,"click",e[0]),n=!0)},p:d,i:d,o:d,d(f){f&&w(t),n=!1,r()}}}function Ae(e,t,n){let{origin:r={x:0,y:0}}=t,{field_array:f}=t,{position:s}=t;function o(){n(1,f[r.y][r.x].move_to={bool:!0,pos:s},f),n(1,f),console.log("move")}return e.$$set=u=>{"origin"in u&&n(2,r=u.origin),"field_array"in u&&n(1,f=u.field_array),"position"in u&&n(3,s=u.position)},[o,f,r,s]}class ce extends x{constructor(t){super(),$(this,t,Ae,je,I,{origin:2,field_array:1,position:3})}}const L=[];function Ne(e,t=d){let n;const r=new Set;function f(u){if(I(e,u)&&(e=u,n)){const l=!L.length;for(const c of r)c[1](),L.push(c,e);if(l){for(let c=0;c<L.length;c+=2)L[c][0](L[c+1]);L.length=0}}}function s(u){f(u(e))}function o(u,l=d){const c=[u,l];return r.add(c),r.size===1&&(n=t(f,s)||d),u(e),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:f,update:s,subscribe:o}}const qe=()=>{let e=new WebSocket("ws://localhost:9000/ws");const t=Ne(0),n=()=>t,r=f=>{console.log("send"),e.send(f)};return e.onmessage=function(f){t.set(f.data)},{getResponse:n,sendMessage:r}};function oe(e,t,n){const r=e.slice();return r[15]=t[n],r[17]=n,r}function Be(e){let t,n,r,f,s,o,u;const l=[Ie,Re,Ke],c=[];function h(i,_){return _&2&&(n=null),_&2&&(r=null),n==null&&(n=i[1][Math.floor(i[17]/8)][i[17]%8].figure=="none"),n?0:(r==null&&(r=i[1][Math.floor(i[17]/8)][i[17]%8].figure=="highlight"),r?1:2)}return f=h(e,-1),s=c[f]=l[f](e),{c(){t=b("div"),s.c(),o=W(),m(t,"class","square-odd svelte-9e2cii")},m(i,_){M(i,t,_),c[f].m(t,null),k(t,o),u=!0},p(i,_){let a=f;f=h(i,_),f===a?c[f].p(i,_):(Y(),y(c[a],1,1,()=>{c[a]=null}),Z(),s=c[f],s?s.p(i,_):(s=c[f]=l[f](i),s.c()),p(s,1),s.m(t,o))},i(i){u||(p(s),u=!0)},o(i){y(s),u=!1},d(i){i&&w(t),c[f].d()}}}function Ce(e){let t,n,r,f,s,o,u;const l=[ze,He,Fe],c=[];function h(i,_){return _&2&&(n=null),_&2&&(r=null),n==null&&(n=i[1][Math.floor(i[17]/8)][i[17]%8].figure=="none"),n?0:(r==null&&(r=i[1][Math.floor(i[17]/8)][i[17]%8].figure=="highlight"),r?1:2)}return f=h(e,-1),s=c[f]=l[f](e),{c(){t=b("div"),s.c(),o=W(),m(t,"class","square-even svelte-9e2cii")},m(i,_){M(i,t,_),c[f].m(t,null),k(t,o),u=!0},p(i,_){let a=f;f=h(i,_),f===a?c[f].p(i,_):(Y(),y(c[a],1,1,()=>{c[a]=null}),Z(),s=c[f],s?s.p(i,_):(s=c[f]=l[f](i),s.c()),p(s,1),s.m(t,o))},i(i){u||(p(s),u=!0)},o(i){y(s),u=!1},d(i){i&&w(t),c[f].d()}}}function Ke(e){let t,n,r;function f(o){e[9](o)}let s={type:e[1][Math.floor(e[17]/8)][e[17]%8].figure,team:e[1][Math.floor(e[17]/8)][e[17]%8].team,position:{x:e[17]%8,y:Math.floor(e[17]/8)},move_to:e[1][Math.floor(e[17]/8)][e[17]%8].move_to};return e[1]!==void 0&&(s.field_array=e[1]),t=new ue({props:s}),A.push(()=>z(t,"field_array",f)),{c(){Q(t.$$.fragment)},m(o,u){B(t,o,u),r=!0},p(o,u){const l={};u&2&&(l.type=o[1][Math.floor(o[17]/8)][o[17]%8].figure),u&2&&(l.team=o[1][Math.floor(o[17]/8)][o[17]%8].team),u&2&&(l.move_to=o[1][Math.floor(o[17]/8)][o[17]%8].move_to),!n&&u&2&&(n=!0,l.field_array=o[1],H(()=>n=!1)),t.$set(l)},i(o){r||(p(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){C(t,o)}}}function Re(e){let t,n,r;function f(o){e[8](o)}let s={origin:e[1][Math.floor(e[17]/8)][e[17]%8].origin,position:{x:e[17]%8,y:Math.floor(e[17]/8)}};return e[1]!==void 0&&(s.field_array=e[1]),t=new ce({props:s}),A.push(()=>z(t,"field_array",f)),{c(){Q(t.$$.fragment)},m(o,u){B(t,o,u),r=!0},p(o,u){const l={};u&2&&(l.origin=o[1][Math.floor(o[17]/8)][o[17]%8].origin),!n&&u&2&&(n=!0,l.field_array=o[1],H(()=>n=!1)),t.$set(l)},i(o){r||(p(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){C(t,o)}}}function Ie(e){let t="",n;return{c(){n=F(t)},m(r,f){M(r,n,f)},p:d,i:d,o:d,d(r){r&&w(n)}}}function Fe(e){let t,n,r;function f(o){e[7](o)}let s={type:e[1][Math.floor(e[17]/8)][e[17]%8].figure,team:e[1][Math.floor(e[17]/8)][e[17]%8].team,position:{x:e[17]%8,y:Math.floor(e[17]/8)},move_to:e[1][Math.floor(e[17]/8)][e[17]%8].move_to};return e[1]!==void 0&&(s.field_array=e[1]),t=new ue({props:s}),A.push(()=>z(t,"field_array",f)),{c(){Q(t.$$.fragment)},m(o,u){B(t,o,u),r=!0},p(o,u){const l={};u&2&&(l.type=o[1][Math.floor(o[17]/8)][o[17]%8].figure),u&2&&(l.team=o[1][Math.floor(o[17]/8)][o[17]%8].team),u&2&&(l.move_to=o[1][Math.floor(o[17]/8)][o[17]%8].move_to),!n&&u&2&&(n=!0,l.field_array=o[1],H(()=>n=!1)),t.$set(l)},i(o){r||(p(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){C(t,o)}}}function He(e){let t,n,r;function f(o){e[6](o)}let s={origin:e[1][Math.floor(e[17]/8)][e[17]%8].origin,position:{x:e[17]%8,y:Math.floor(e[17]/8)}};return e[1]!==void 0&&(s.field_array=e[1]),t=new ce({props:s}),A.push(()=>z(t,"field_array",f)),{c(){Q(t.$$.fragment)},m(o,u){B(t,o,u),r=!0},p(o,u){const l={};u&2&&(l.origin=o[1][Math.floor(o[17]/8)][o[17]%8].origin),!n&&u&2&&(n=!0,l.field_array=o[1],H(()=>n=!1)),t.$set(l)},i(o){r||(p(t.$$.fragment,o),r=!0)},o(o){y(t.$$.fragment,o),r=!1},d(o){C(t,o)}}}function ze(e){let t="",n;return{c(){n=F(t)},m(r,f){M(r,n,f)},p:d,i:d,o:d,d(r){r&&w(n)}}}function ie(e){let t,n,r,f;const s=[Ce,Be],o=[];function u(l,c){return(l[17]+Math.floor(l[17]/8))%2==0?0:1}return t=u(e),n=o[t]=s[t](e),{c(){n.c(),r=ye()},m(l,c){o[t].m(l,c),M(l,r,c),f=!0},p(l,c){n.p(l,c)},i(l){f||(p(n),f=!0)},o(l){y(n),f=!1},d(l){l&&w(r),o[t].d(l)}}}function re(e){let t,n,r,f,s;return{c(){t=b("div"),n=b("div"),r=b("button"),r.textContent="Join",m(r,"class","overlay-text svelte-9e2cii"),m(n,"class","overlay-container svelte-9e2cii"),m(t,"class","GameOverScreen svelte-9e2cii")},m(o,u){M(o,t,u),k(t,n),k(n,r),f||(s=D(r,"click",e[10]),f=!0)},p:d,d(o){o&&w(t),f=!1,s()}}}function Qe(e){let t,n,r,f,s,o,u=ne({length:64}),l=[];for(let i=0;i<u.length;i+=1)l[i]=ie(oe(e,u,i));const c=i=>y(l[i],1,1,()=>{l[i]=null});let h=e[0]&&re(e);return{c(){t=b("main"),n=b("div"),r=b("div");for(let i=0;i<l.length;i+=1)l[i].c();f=W(),s=b("div"),h&&h.c(),m(r,"class","chess-board svelte-9e2cii"),m(n,"class","board-container svelte-9e2cii")},m(i,_){M(i,t,_),k(t,n),k(n,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(r,null);k(t,f),k(t,s),h&&h.m(s,null),o=!0},p(i,[_]){if(_&2){u=ne({length:64});let a;for(a=0;a<u.length;a+=1){const E=oe(i,u,a);l[a]?(l[a].p(E,_),p(l[a],1)):(l[a]=ie(E),l[a].c(),p(l[a],1),l[a].m(r,null))}for(Y(),a=u.length;a<l.length;a+=1)c(a);Z()}i[0]?h?h.p(i,_):(h=re(i),h.c(),h.m(s,null)):h&&(h.d(1),h=null)},i(i){if(!o){for(let _=0;_<u.length;_+=1)p(l[_]);o=!0}},o(i){l=l.filter(Boolean);for(let _=0;_<l.length;_+=1)y(l[_]);o=!1},d(i){i&&w(t),be(l,i),h&&h.d()}}}function Te(e,t,n){let r,f;const s=qe(),o=s.getResponse();pe(e,o,g=>n(5,f=g));let u=!0;function l(g){g=="which team"&&n(0,u=!1),s.sendMessage(g)}function c(g){for(let v=0;v<8;v++)n(1,i[6][v]={figure:"Pawn",team:g,move_to:{bool:!1}},i);n(1,i[7][0]=n(1,i[7][7]={figure:"Rook",team:g,move_to:{bool:!1}},i),i),n(1,i[7][1]=n(1,i[7][6]={figure:"Knight",team:g,move_to:{bool:!1}},i),i),n(1,i[7][2]=n(1,i[7][5]={figure:"Bishop",team:g,move_to:{bool:!1}},i),i),n(1,i[7][3]={figure:"Queen",team:g,move_to:{bool:!1}},i),n(1,i[7][4]={figure:"King",team:g,move_to:{bool:!1}},i)}function h(g){for(let v=0;v<8;v++)n(1,i[1][v]={figure:"Pawn",team:g,move_to:{bool:!1}},i);n(1,i[0][0]=n(1,i[0][7]={figure:"Rook",team:g,move_to:{bool:!1}},i),i),n(1,i[0][1]=n(1,i[0][6]={figure:"Knight",team:g,move_to:{bool:!1}},i),i),n(1,i[0][2]=n(1,i[0][5]={figure:"Bishop",team:g,move_to:{bool:!1}},i),i),n(1,i[0][3]={figure:"Queen",team:g,move_to:{bool:!1}},i),n(1,i[0][4]={figure:"King",team:g,move_to:{bool:!1}},i)}let i=[];for(let g=0;g<8;g++){i.push([]);for(let v=0;v<8;v++)i[g].push({figure:"none",move_to:{bool:!1}})}i[7][0].figure="Pawn",i=i;function _(g){i=g,n(1,i)}function a(g){i=g,n(1,i)}function E(g){i=g,n(1,i)}function ae(g){i=g,n(1,i)}const _e=()=>l("which team");return e.$$.update=()=>{e.$$.dirty&32&&n(4,r=f.toString()),e.$$.dirty&16&&(console.log(r),r=="black"?(c("black"),h("white")):r=="white"&&(c("white"),h("black")))},[u,i,o,l,r,f,_,a,E,ae,_e]}class Ge extends x{constructor(t){super(),$(this,t,Te,Qe,I,{})}}new Ge({target:document.getElementById("app")});
