var We=Object.defineProperty;var Ye=(e,f,t)=>f in e?We(e,f,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[f]=t;var _e=(e,f,t)=>(Ye(e,typeof f!="symbol"?f+"":f,t),t);(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))u(_);new MutationObserver(_=>{for(const h of _)if(h.type==="childList")for(const s of h.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function t(_){const h={};return _.integrity&&(h.integrity=_.integrity),_.referrerPolicy&&(h.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?h.credentials="include":_.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function u(_){if(_.ep)return;_.ep=!0;const h=t(_);fetch(_.href,h)}})();function J(){}function De(e,f){for(const t in f)e[t]=f[t];return e}function Ee(e){return e()}function ye(){return Object.create(null)}function Z(e){e.forEach(Ee)}function Be(e){return typeof e=="function"}function x(e,f){return e!=e?f==f:e!==f||e&&typeof e=="object"||typeof e=="function"}let te;function ge(e,f){return e===f?!0:(te||(te=document.createElement("a")),te.href=f,e===te.href)}function Xe(e){return Object.keys(e).length===0}function Ze(e,...f){if(e==null){for(const u of f)u(void 0);return J}const t=e.subscribe(...f);return t.unsubscribe?()=>t.unsubscribe():t}function xe(e,f,t){e.$$.on_destroy.push(Ze(f,t))}function $e(e,f,t,u){if(e){const _=Qe(e,f,t,u);return e[0](_)}}function Qe(e,f,t,u){return e[1]&&u?De(t.ctx.slice(),e[1](u(f))):t.ctx}function et(e,f,t,u){if(e[2]&&u){const _=e[2](u(t));if(f.dirty===void 0)return _;if(typeof _=="object"){const h=[],s=Math.max(f.dirty.length,_.length);for(let l=0;l<s;l+=1)h[l]=f.dirty[l]|_[l];return h}return f.dirty|_}return f.dirty}function tt(e,f,t,u,_,h){if(_){const s=Qe(f,t,u,h);e.p(s,_)}}function ft(e){if(e.ctx.length>32){const f=[],t=e.ctx.length/32;for(let u=0;u<t;u++)f[u]=-1;return f}return-1}function A(e,f){e.appendChild(f)}function j(e,f,t){e.insertBefore(f,t||null)}function S(e){e.parentNode&&e.parentNode.removeChild(e)}function rt(e,f){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(f)}function L(e){return document.createElement(e)}function re(e){return document.createTextNode(e)}function z(){return re(" ")}function be(){return re("")}function pe(e,f,t,u){return e.addEventListener(f,t,u),()=>e.removeEventListener(f,t,u)}function R(e,f,t){t==null?e.removeAttribute(f):e.getAttribute(f)!==t&&e.setAttribute(f,t)}function ot(e){return Array.from(e.childNodes)}let de;function X(e){de=e}const W=[],K=[];let Y=[];const ce=[],it=Promise.resolve();let ae=!1;function nt(){ae||(ae=!0,it.then(Oe))}function me(e){Y.push(e)}function B(e){ce.push(e)}const he=new Set;let U=0;function Oe(){if(U!==0)return;const e=de;do{try{for(;U<W.length;){const f=W[U];U++,X(f),lt(f.$$)}}catch(f){throw W.length=0,U=0,f}for(X(null),W.length=0,U=0;K.length;)K.pop()();for(let f=0;f<Y.length;f+=1){const t=Y[f];he.has(t)||(he.add(t),t())}Y.length=0}while(W.length);for(;ce.length;)ce.pop()();ae=!1,he.clear(),X(e)}function lt(e){if(e.fragment!==null){e.update(),Z(e.before_update);const f=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,f),e.after_update.forEach(me)}}function ut(e){const f=[],t=[];Y.forEach(u=>e.indexOf(u)===-1?f.push(u):t.push(u)),t.forEach(u=>u()),Y=f}const fe=new Set;let T;function $(){T={r:0,c:[],p:T}}function ee(){T.r||Z(T.c),T=T.p}function q(e,f){e&&e.i&&(fe.delete(e),e.i(f))}function O(e,f,t,u){if(e&&e.o){if(fe.has(e))return;fe.add(e),T.c.push(()=>{fe.delete(e),u&&(t&&e.d(1),u())}),e.o(f)}else u&&u()}function ke(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Q(e,f,t){const u=e.$$.props[f];u!==void 0&&(e.$$.bound[u]=t,t(e.$$.ctx[u]))}function F(e){e&&e.c()}function H(e,f,t){const{fragment:u,after_update:_}=e.$$;u&&u.m(f,t),me(()=>{const h=e.$$.on_mount.map(Ee).filter(Be);e.$$.on_destroy?e.$$.on_destroy.push(...h):Z(h),e.$$.on_mount=[]}),_.forEach(me)}function I(e,f){const t=e.$$;t.fragment!==null&&(ut(t.after_update),Z(t.on_destroy),t.fragment&&t.fragment.d(f),t.on_destroy=t.fragment=null,t.ctx=[])}function st(e,f){e.$$.dirty[0]===-1&&(W.push(e),nt(),e.$$.dirty.fill(0)),e.$$.dirty[f/31|0]|=1<<f%31}function oe(e,f,t,u,_,h,s,l=[-1]){const n=de;X(e);const i=e.$$={fragment:null,ctx:[],props:h,update:J,not_equal:_,bound:ye(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f.context||(n?n.$$.context:[])),callbacks:ye(),dirty:l,skip_bound:!1,root:f.target||n.$$.root};s&&s(i.root);let c=!1;if(i.ctx=t?t(e,f.props||{},(g,r,...a)=>{const p=a.length?a[0]:r;return i.ctx&&_(i.ctx[g],i.ctx[g]=p)&&(!i.skip_bound&&i.bound[g]&&i.bound[g](p),c&&st(e,g)),r}):[],i.update(),c=!0,Z(i.before_update),i.fragment=u?u(i.ctx):!1,f.target){if(f.hydrate){const g=ot(f.target);i.fragment&&i.fragment.l(g),g.forEach(S)}else i.fragment&&i.fragment.c();f.intro&&q(e.$$.fragment),H(e,f.target,f.anchor),Oe()}X(n)}class ie{constructor(){_e(this,"$$");_e(this,"$$set")}$destroy(){I(this,1),this.$destroy=J}$on(f,t){if(!Be(t))return J;const u=this.$$.callbacks[f]||(this.$$.callbacks[f]=[]);return u.push(t),()=>{const _=u.indexOf(t);_!==-1&&u.splice(_,1)}}$set(f){this.$$set&&!Xe(f)&&(this.$$.skip_bound=!0,this.$$set(f),this.$$.skip_bound=!1)}}const _t="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_t);function ht(e,f,t){let{check_list:u=[!1]}=f,{prevent_position:_=[]}=f;const h=(n,i,c,g)=>{t(0,u=[!1]),console.log("CHECK CHECK"),s("Pawn",c,g,n,{x:i.x-1,y:i.y-1}),s("Pawn",c,g,n,{x:i.x+1,y:i.y-1});for(let r=-1;r<2;r++)for(let a=-1;a<2;a++)a==0&&r==0||s("King",c,g,n,{x:i.x+a,y:i.y+r});for(let r=-1;r>-8;r--){let a=s("Rook",c,g,n,{x:i.x+r,y:i.y});if(!s("Queen",c,g,n,{x:i.x+r,y:i.y})&&!a)break}for(let r=1;r<8;r++){let a=s("Rook",c,g,n,{x:i.x+r,y:i.y});if(!s("Queen",c,g,n,{x:i.x+r,y:i.y})&&!a)break}for(let r=-1;r>-8;r--){let a=s("Rook",c,g,n,{x:i.x,y:i.y+r});if(!s("Queen",c,g,n,{x:i.x,y:i.y+r})&&!a)break}for(let r=1;r<8;r++){let a=s("Rook",c,g,n,{x:i.x,y:i.y+r});if(!s("Queen",c,g,n,{x:i.x,y:i.y+r})&&!a)break}for(let r=-1;r>-8;r--){let a=s("Bishop",c,g,n,{x:i.x+r,y:i.y+r});if(!s("Queen",c,g,n,{x:i.x+r,y:i.y+r})&&!a)break}for(let r=1;r<8;r++){let a=s("Bishop",c,g,n,{x:i.x+r,y:i.y+r});if(!s("Queen",c,g,n,{x:i.x+r,y:i.y+r})&&!a)break}for(let r=-1;r>-8;r--){let a=s("Bishop",c,g,n,{x:i.x-r,y:i.y+r});if(!s("Queen",c,g,n,{x:i.x-r,y:i.y+r})&&!a)break}for(let r=1;r<8;r++){let a=s("Bishop",c,g,n,{x:i.x-r,y:i.y+r});if(!s("Queen",c,g,n,{x:i.x-r,y:i.y+r})&&!a)break}s("Knight",c,g,n,{x:i.x-2,y:i.y+1}),s("Knight",c,g,n,{x:i.x-2,y:i.y-1}),s("Knight",c,g,n,{x:i.x+2,y:i.y+1}),s("Knight",c,g,n,{x:i.x+2,y:i.y-1}),s("Knight",c,g,n,{x:i.x-1,y:i.y+2}),s("Knight",c,g,n,{x:i.x+1,y:i.y+2}),s("Knight",c,g,n,{x:i.x-1,y:i.y-2}),s("Knight",c,g,n,{x:i.x+1,y:i.y-2})};function s(n,i,c,g,r){return r.y<0||r.y>7||r.x<0||r.x>7?(console.log("check: over borders!"),!1):g[r.y][r.x].team==i?(console.log("check: own team!"),!1):(g[r.y][r.x].figure==n&&g[r.y][r.x].team==c&&(console.log("chess"),t(0,u[0]=!0,u),u.push({type:n,pos:r}),console.log(u)),g[r.y][r.x].team!=c)}const l=n=>{t(1,_=[]);for(let i=0;i<u.length;i++)if(_.push(u[i].pos),u[i].type=="Queen"||u[i].type=="Rook"||u[i].type=="Bishop"){if(u[i].pos.x==n.x){if(u[i].pos.y>n.y)for(let c=n.y+1;c<u[i].pos.y;c++)_.push({x:n.x,y:c});else for(let c=u[i].pos.y+1;c<n.y;c++)_.push({x:n.x,y:c});continue}if(u[i].pos.y==n.y){if(u[i].pos.x>n.x)for(let c=n.x+1;c<u[i].pos.x;c++)_.push({y:n.y,x:c});else for(let c=u[i].pos.x+1;c<n.x;c++)_.push({y:n.y,x:c});continue}if(u[i].pos.y>n.y&&u[i].pos.x>n.x)for(let c=1;n.x+c<u[i].pos.x;c++)_.push({x:n.x+c,y:n.y+c});if(u[i].pos.y<n.y&&u[i].pos.x<n.x)for(let c=1;c+u[i].pos.x<n.x;c++)_.push({x:u[i].pos.x+c,y:u[i].pos.y+c});if(u[i].pos.y>n.y&&u[i].pos.x<n.x)for(let c=1;c+u[i].pos.x<n.x;c++)_.push({x:n.x-c,y:n.y+c});if(u[i].pos.y<n.y&&u[i].pos.x>n.x)for(let c=1;n.x+c<u[i].pos.x;c++)_.push({x:n.x+c,y:n.y-c})}console.log(_)};return e.$$set=n=>{"check_list"in n&&t(0,u=n.check_list),"prevent_position"in n&&t(1,_=n.prevent_position)},[u,_,h,l]}class Pe extends ie{constructor(f){super(),oe(this,f,ht,null,x,{check_list:0,prevent_position:1,check_check:2,get_check_prevent_position:3})}get check_check(){return this.$$.ctx[2]}get get_check_prevent_position(){return this.$$.ctx[3]}}function gt(e){let f,t,u,_,h,s,l,n,i;function c(r){e[16](r)}let g={};return e[2]!==void 0&&(g.check_list=e[2]),t=new Pe({props:g}),e[15](t),K.push(()=>Q(t,"check_list",c)),{c(){f=L("button"),F(t.$$.fragment),_=z(),h=L("img"),R(h,"class","figure-image svelte-1rysv6i"),ge(h.src,s=e[3]+e[0]+".png")||R(h,"src",s),R(h,"alt",""),R(f,"class","figure-button svelte-1rysv6i")},m(r,a){j(r,f,a),H(t,f,null),A(f,_),A(f,h),l=!0,n||(i=pe(f,"click",e[4]),n=!0)},p(r,[a]){const p={};!u&&a&4&&(u=!0,p.check_list=r[2],B(()=>u=!1)),t.$set(p),(!l||a&9&&!ge(h.src,s=r[3]+r[0]+".png"))&&R(h,"src",s)},i(r){l||(q(t.$$.fragment,r),l=!0)},o(r){O(t.$$.fragment,r),l=!1},d(r){r&&S(f),e[15](null),I(t),n=!1,i()}}}function ct(e,f,t){let u,{type:_}=f,{team:h}=f,{current_team:s}=f,{position:l={x:0,y:0}}=f,{field_array:n}=f,{move_to:i={bool:!1}}=f,{moved:c}=f,{own_team:g}=f,{enemy_team:r}=f,{prevent_positions:a}=f,{highlight_active:p}=f,M=!1,v,d;function y(){if(s!=h||g!=h){console.log("cur: "+s+", team: "+h);return}M?m():p||C()}function E(o,P){return v.check_check(n,{y:l.y+o,x:l.x+P},g,r),!!d[0]}function C(){if(_=="King"){for(let o=-1;o<2;o++)E(-1,o)||k(-1,o);E(0,-1)||k(0,-1),E(-1,1)||k(0,1);for(let o=-1;o<2;o++)E(1,o)||k(1,o)}else if(_=="Rook"){for(let o=-1;o>-8&&k(o,0)!=!1;o--);for(let o=1;o<8&&k(o,0)!=!1;o++);for(let o=-1;o>-8&&k(0,o)!=!1;o--);for(let o=1;o<8&&k(0,o)!=!1;o++);}else if(_=="Bishop"){for(let o=-1;o>-8&&k(o,o)!=!1;o--);for(let o=1;o<8&&k(o,o)!=!1;o++);for(let o=-1;o>-8&&k(-o,o)!=!1;o--);for(let o=1;o<8&&k(-o,o)!=!1;o++);}else if(_=="Queen"){for(let o=-1;o>-8&&k(o,o)!=!1;o--);for(let o=1;o<8&&k(o,o)!=!1;o++);for(let o=-1;o>-8&&k(-o,o)!=!1;o--);for(let o=1;o<8&&k(-o,o)!=!1;o++);for(let o=-1;o>-8&&k(o,0)!=!1;o--);for(let o=1;o<8&&k(o,0)!=!1;o++);for(let o=-1;o>-8&&k(0,o)!=!1;o--);for(let o=1;o<8&&k(0,o)!=!1;o++);}else if(_=="Knight")k(-2,-1),k(-2,1),k(2,-1),k(2,1),k(-1,-2),k(1,-2),k(-1,2),k(1,2);else if(_=="Pawn"){for(let o=-1;o<2;o+=2)l.y-1<0||l.x+o<0||l.x+o>7||n[l.y-1][l.x+o].team==r&&k(-1,o);n[l.y-1][l.x].team!=r&&(n[l.y][l.x].origin_pos&&k(-2,0),k(-1,0))}else k(-1,0)}function m(){if(_=="King"){for(let o=-1;o<2;o++)w(-1,o);w(0,-1),w(0,1);for(let o=-1;o<2;o++)w(1,o)}else if(_=="Rook"){for(let o=-1;o>-8&&w(o,0)!=!1;o--);for(let o=1;o<8&&w(o,0)!=!1;o++);for(let o=-1;o>-8&&w(0,o)!=!1;o--);for(let o=1;o<8&&w(0,o)!=!1;o++);}else if(_=="Bishop"){for(let o=-1;o>-8&&w(o,o)!=!1;o--);for(let o=1;o<8&&w(o,o)!=!1;o++);for(let o=-1;o>-8&&w(-o,o)!=!1;o--);for(let o=1;o<8&&w(-o,o)!=!1;o++);}else if(_=="Queen"){for(let o=-1;o>-8&&w(o,o)!=!1;o--);for(let o=1;o<8&&w(o,o)!=!1;o++);for(let o=-1;o>-8&&w(-o,o)!=!1;o--);for(let o=1;o<8&&w(-o,o)!=!1;o++);for(let o=-1;o>-8&&w(o,0)!=!1;o--);for(let o=1;o<8&&w(o,0)!=!1;o++);for(let o=-1;o>-8&&w(0,o)!=!1;o--);for(let o=1;o<8&&w(0,o)!=!1;o++);}else if(_=="Knight")w(-2,-1),w(-2,1),w(2,-1),w(2,1),w(-1,-2),w(1,-2),w(-1,2),w(1,2);else if(_=="Pawn"){for(let o=-1;o<2;o+=2)l.y-1<0||l.x+o<0||l.x+o>7||n[l.y-1][l.x+o].team==r&&w(-1,o);n[l.y-1][l.x].team!=r&&(n[l.y][l.x].origin_pos&&w(-2,0),w(-1,0))}else w(-1,0)}function k(o,P){if(console.log("PLACE "+o+" "+P),l.y+o>=0&&l.y+o<=7&&l.x+P>=0&&l.x+P<=7){if(n[l.y+o][l.x+P].team==h)return!1;let D=!1;a.length<1&&(console.log("no prevent positions"),D=!0);for(let G=1;G<a.length;G++)if(a[G].y==l.y+o&&a[G].x==l.x+P){console.log(a[G]),D=!0;break}return!(!D||(t(6,n[l.y+o][l.x+P].is_highlight=!0,n),t(6,n[l.y+o][l.x+P].origin=l,n),M=!0,t(8,p=!0),n[l.y+o][l.x+P].team==r))}else return!1}function w(o,P){return l.y+o>=0&&l.y+o<=7&&l.x+P>=0&&l.x+P<=7?!(n[l.y+o][l.x+P].team==h||(t(6,n[l.y+o][l.x+P].is_highlight=!1,n),M=!1,t(8,p=!1),n[l.y+o][l.x+P].team==r)):!1}function ue(o){K[o?"unshift":"push"](()=>{v=o,t(1,v)})}function se(o){d=o,t(2,d)}return e.$$set=o=>{"type"in o&&t(0,_=o.type),"team"in o&&t(9,h=o.team),"current_team"in o&&t(10,s=o.current_team),"position"in o&&t(11,l=o.position),"field_array"in o&&t(6,n=o.field_array),"move_to"in o&&t(5,i=o.move_to),"moved"in o&&t(7,c=o.moved),"own_team"in o&&t(12,g=o.own_team),"enemy_team"in o&&t(13,r=o.enemy_team),"prevent_positions"in o&&t(14,a=o.prevent_positions),"highlight_active"in o&&t(8,p=o.highlight_active)},e.$$.update=()=>{e.$$.dirty&512&&t(3,u="/images/"+h+"-pixel/"),e.$$.dirty&2593&&i.bool&&(t(5,i.bool=!1,i),console.log("move figure"),m(),t(6,n[l.y][l.x]={figure:"none",is_highlight:!1,origin_pos:!1},n),t(6,n[i.pos.y][i.pos.x]={figure:_,team:h,move_to:{bool:!1},is_highlight:!1,origin_pos:!1},n),t(7,c={bool:!0,old_pos:l,new_pos:i.pos}))},[_,v,d,u,y,i,n,c,p,h,s,l,g,r,a,ue,se]}class ne extends ie{constructor(f){super(),oe(this,f,ct,gt,x,{type:0,team:9,current_team:10,position:11,field_array:6,move_to:5,moved:7,own_team:12,enemy_team:13,prevent_positions:14,highlight_active:8})}}function at(e){let f,t,u,_,h,s,l;const n=e[5].default,i=$e(n,e,e[4],null);return{c(){f=L("button"),t=L("img"),_=z(),i&&i.c(),R(t,"class","highlight-image svelte-1h4ejhx"),ge(t.src,u="/images/highlight.svg")||R(t,"src",u),R(t,"alt",""),R(f,"class","highlight-button svelte-1h4ejhx")},m(c,g){j(c,f,g),A(f,t),A(f,_),i&&i.m(f,null),h=!0,s||(l=pe(f,"click",e[0]),s=!0)},p(c,[g]){i&&i.p&&(!h||g&16)&&tt(i,n,c,c[4],h?et(n,c[4],g,null):ft(c[4]),null)},i(c){h||(q(i,c),h=!0)},o(c){O(i,c),h=!1},d(c){c&&S(f),i&&i.d(c),s=!1,l()}}}function mt(e,f,t){let{$$slots:u={},$$scope:_}=f,{origin:h={x:0,y:0}}=f,{field_array:s}=f,{position:l}=f;function n(){t(1,s[h.y][h.x].move_to={bool:!0,pos:l},s),t(1,s),console.log("move from ")}return e.$$set=i=>{"origin"in i&&t(2,h=i.origin),"field_array"in i&&t(1,s=i.field_array),"position"in i&&t(3,l=i.position),"$$scope"in i&&t(4,_=i.$$scope)},[n,s,h,l,_,u]}class le extends ie{constructor(f){super(),oe(this,f,mt,at,x,{origin:2,field_array:1,position:3})}}const V=[];function bt(e,f=J){let t;const u=new Set;function _(l){if(x(e,l)&&(e=l,t)){const n=!V.length;for(const i of u)i[1](),V.push(i,e);if(n){for(let i=0;i<V.length;i+=2)V[i][0](V[i+1]);V.length=0}}}function h(l){_(l(e))}function s(l,n=J){const i=[l,n];return u.add(i),u.size===1&&(t=f(_,h)||J),l(e),()=>{u.delete(i),u.size===0&&t&&(t(),t=null)}}return{set:_,update:h,subscribe:s}}const pt=()=>{let e=new WebSocket("ws://localhost:9000/ws");const f=bt(0),t=()=>f,u=_=>{console.log("send"),e.send(_)};return e.onmessage=function(_){f.set(_.data)},{getResponse:t,sendMessage:u}};function we(e,f,t){const u=e.slice();return u[44]=f[t],u[46]=t,u}function dt(e){let f,t,u,_,h,s,l;const n=[Mt,wt,kt],i=[];function c(g,r){return r[0]&128&&(t=null),r[0]&128&&(u=null),t==null&&(t=g[7][Math.floor(g[46]/8)][g[46]%8].figure=="none"),t?0:(u==null&&(u=!!g[7][Math.floor(g[46]/8)][g[46]%8].is_highlight),u?1:2)}return _=c(e,[-1,-1]),h=i[_]=n[_](e),{c(){f=L("div"),h.c(),s=z(),R(f,"class","square-odd svelte-9e2cii")},m(g,r){j(g,f,r),i[_].m(f,null),A(f,s),l=!0},p(g,r){let a=_;_=c(g,r),_===a?i[_].p(g,r):($(),O(i[a],1,1,()=>{i[a]=null}),ee(),h=i[_],h?h.p(g,r):(h=i[_]=n[_](g),h.c()),q(h,1),h.m(f,s))},i(g){l||(q(h),l=!0)},o(g){O(h),l=!1},d(g){g&&S(f),i[_].d()}}}function yt(e){let f,t,u,_,h,s,l;const n=[Et,qt,Kt],i=[];function c(g,r){return r[0]&128&&(t=null),r[0]&128&&(u=null),t==null&&(t=g[7][Math.floor(g[46]/8)][g[46]%8].figure=="none"),t?0:(u==null&&(u=!!g[7][Math.floor(g[46]/8)][g[46]%8].is_highlight),u?1:2)}return _=c(e,[-1,-1]),h=i[_]=n[_](e),{c(){f=L("div"),h.c(),s=z(),R(f,"class","square-even svelte-9e2cii")},m(g,r){j(g,f,r),i[_].m(f,null),A(f,s),l=!0},p(g,r){let a=_;_=c(g,r),_===a?i[_].p(g,r):($(),O(i[a],1,1,()=>{i[a]=null}),ee(),h=i[_],h?h.p(g,r):(h=i[_]=n[_](g),h.c()),q(h,1),h.m(f,s))},i(g){l||(q(h),l=!0)},o(g){O(h),l=!1},d(g){g&&S(f),i[_].d()}}}function kt(e){let f,t,u,_,h,s;function l(r){e[34](r)}function n(r){e[35](r)}function i(r){e[36](r)}function c(r){e[37](r)}let g={type:e[7][Math.floor(e[46]/8)][e[46]%8].figure,team:e[7][Math.floor(e[46]/8)][e[46]%8].team,position:{x:e[46]%8,y:Math.floor(e[46]/8)},move_to:e[7][Math.floor(e[46]/8)][e[46]%8].move_to,own_team:e[0],enemy_team:e[1],prevent_positions:e[3]};return e[5]!==void 0&&(g.current_team=e[5]),e[7]!==void 0&&(g.field_array=e[7]),e[6]!==void 0&&(g.moved=e[6]),e[8]!==void 0&&(g.highlight_active=e[8]),f=new ne({props:g}),K.push(()=>Q(f,"current_team",l)),K.push(()=>Q(f,"field_array",n)),K.push(()=>Q(f,"moved",i)),K.push(()=>Q(f,"highlight_active",c)),{c(){F(f.$$.fragment)},m(r,a){H(f,r,a),s=!0},p(r,a){const p={};a[0]&128&&(p.type=r[7][Math.floor(r[46]/8)][r[46]%8].figure),a[0]&128&&(p.team=r[7][Math.floor(r[46]/8)][r[46]%8].team),a[0]&128&&(p.move_to=r[7][Math.floor(r[46]/8)][r[46]%8].move_to),a[0]&1&&(p.own_team=r[0]),a[0]&2&&(p.enemy_team=r[1]),a[0]&8&&(p.prevent_positions=r[3]),!t&&a[0]&32&&(t=!0,p.current_team=r[5],B(()=>t=!1)),!u&&a[0]&128&&(u=!0,p.field_array=r[7],B(()=>u=!1)),!_&&a[0]&64&&(_=!0,p.moved=r[6],B(()=>_=!1)),!h&&a[0]&256&&(h=!0,p.highlight_active=r[8],B(()=>h=!1)),f.$set(p)},i(r){s||(q(f.$$.fragment,r),s=!0)},o(r){O(f.$$.fragment,r),s=!1},d(r){I(f,r)}}}function wt(e){let f,t,u;function _(s){e[33](s)}let h={origin:e[7][Math.floor(e[46]/8)][e[46]%8].origin,position:{x:e[46]%8,y:Math.floor(e[46]/8)},$$slots:{default:[vt]},$$scope:{ctx:e}};return e[7]!==void 0&&(h.field_array=e[7]),f=new le({props:h}),K.push(()=>Q(f,"field_array",_)),{c(){F(f.$$.fragment)},m(s,l){H(f,s,l),u=!0},p(s,l){const n={};l[0]&128&&(n.origin=s[7][Math.floor(s[46]/8)][s[46]%8].origin),l[0]&491|l[1]&65536&&(n.$$scope={dirty:l,ctx:s}),!t&&l[0]&128&&(t=!0,n.field_array=s[7],B(()=>t=!1)),f.$set(n)},i(s){u||(q(f.$$.fragment,s),u=!0)},o(s){O(f.$$.fragment,s),u=!1},d(s){I(f,s)}}}function Mt(e){let f="",t,u,_=e[7][Math.floor(e[46]/8)][e[46]%8].is_highlight,h,s,l=_&&Me(e);return{c(){t=re(f),u=z(),l&&l.c(),h=be()},m(n,i){j(n,t,i),j(n,u,i),l&&l.m(n,i),j(n,h,i),s=!0},p(n,i){i[0]&128&&(_=n[7][Math.floor(n[46]/8)][n[46]%8].is_highlight),_?l?(l.p(n,i),i[0]&128&&q(l,1)):(l=Me(n),l.c(),q(l,1),l.m(h.parentNode,h)):l&&($(),O(l,1,1,()=>{l=null}),ee())},i(n){s||(q(l),s=!0)},o(n){O(l),s=!1},d(n){n&&(S(t),S(u),S(h)),l&&l.d(n)}}}function vt(e){let f,t,u,_,h,s;function l(r){e[29](r)}function n(r){e[30](r)}function i(r){e[31](r)}function c(r){e[32](r)}let g={type:e[7][Math.floor(e[46]/8)][e[46]%8].figure,team:e[7][Math.floor(e[46]/8)][e[46]%8].team,position:{x:e[46]%8,y:Math.floor(e[46]/8)},move_to:e[7][Math.floor(e[46]/8)][e[46]%8].move_to,own_team:e[0],enemy_team:e[1],prevent_positions:e[3]};return e[5]!==void 0&&(g.current_team=e[5]),e[7]!==void 0&&(g.field_array=e[7]),e[6]!==void 0&&(g.moved=e[6]),e[8]!==void 0&&(g.highlight_active=e[8]),f=new ne({props:g}),K.push(()=>Q(f,"current_team",l)),K.push(()=>Q(f,"field_array",n)),K.push(()=>Q(f,"moved",i)),K.push(()=>Q(f,"highlight_active",c)),{c(){F(f.$$.fragment)},m(r,a){H(f,r,a),s=!0},p(r,a){const p={};a[0]&128&&(p.type=r[7][Math.floor(r[46]/8)][r[46]%8].figure),a[0]&128&&(p.team=r[7][Math.floor(r[46]/8)][r[46]%8].team),a[0]&128&&(p.move_to=r[7][Math.floor(r[46]/8)][r[46]%8].move_to),a[0]&1&&(p.own_team=r[0]),a[0]&2&&(p.enemy_team=r[1]),a[0]&8&&(p.prevent_positions=r[3]),!t&&a[0]&32&&(t=!0,p.current_team=r[5],B(()=>t=!1)),!u&&a[0]&128&&(u=!0,p.field_array=r[7],B(()=>u=!1)),!_&&a[0]&64&&(_=!0,p.moved=r[6],B(()=>_=!1)),!h&&a[0]&256&&(h=!0,p.highlight_active=r[8],B(()=>h=!1)),f.$set(p)},i(r){s||(q(f.$$.fragment,r),s=!0)},o(r){O(f.$$.fragment,r),s=!1},d(r){I(f,r)}}}function Me(e){let f,t,u;function _(s){e[28](s)}let h={origin:e[7][Math.floor(e[46]/8)][e[46]%8].origin,position:{x:e[46]%8,y:Math.floor(e[46]/8)}};return e[7]!==void 0&&(h.field_array=e[7]),f=new le({props:h}),K.push(()=>Q(f,"field_array",_)),{c(){F(f.$$.fragment)},m(s,l){H(f,s,l),u=!0},p(s,l){const n={};l[0]&128&&(n.origin=s[7][Math.floor(s[46]/8)][s[46]%8].origin),!t&&l[0]&128&&(t=!0,n.field_array=s[7],B(()=>t=!1)),f.$set(n)},i(s){u||(q(f.$$.fragment,s),u=!0)},o(s){O(f.$$.fragment,s),u=!1},d(s){I(f,s)}}}function Kt(e){let f,t,u,_,h,s;function l(r){e[24](r)}function n(r){e[25](r)}function i(r){e[26](r)}function c(r){e[27](r)}let g={type:e[7][Math.floor(e[46]/8)][e[46]%8].figure,team:e[7][Math.floor(e[46]/8)][e[46]%8].team,position:{x:e[46]%8,y:Math.floor(e[46]/8)},move_to:e[7][Math.floor(e[46]/8)][e[46]%8].move_to,own_team:e[0],enemy_team:e[1],prevent_positions:e[3]};return e[5]!==void 0&&(g.current_team=e[5]),e[7]!==void 0&&(g.field_array=e[7]),e[6]!==void 0&&(g.moved=e[6]),e[8]!==void 0&&(g.highlight_active=e[8]),f=new ne({props:g}),K.push(()=>Q(f,"current_team",l)),K.push(()=>Q(f,"field_array",n)),K.push(()=>Q(f,"moved",i)),K.push(()=>Q(f,"highlight_active",c)),{c(){F(f.$$.fragment)},m(r,a){H(f,r,a),s=!0},p(r,a){const p={};a[0]&128&&(p.type=r[7][Math.floor(r[46]/8)][r[46]%8].figure),a[0]&128&&(p.team=r[7][Math.floor(r[46]/8)][r[46]%8].team),a[0]&128&&(p.move_to=r[7][Math.floor(r[46]/8)][r[46]%8].move_to),a[0]&1&&(p.own_team=r[0]),a[0]&2&&(p.enemy_team=r[1]),a[0]&8&&(p.prevent_positions=r[3]),!t&&a[0]&32&&(t=!0,p.current_team=r[5],B(()=>t=!1)),!u&&a[0]&128&&(u=!0,p.field_array=r[7],B(()=>u=!1)),!_&&a[0]&64&&(_=!0,p.moved=r[6],B(()=>_=!1)),!h&&a[0]&256&&(h=!0,p.highlight_active=r[8],B(()=>h=!1)),f.$set(p)},i(r){s||(q(f.$$.fragment,r),s=!0)},o(r){O(f.$$.fragment,r),s=!1},d(r){I(f,r)}}}function qt(e){let f,t,u;function _(s){e[23](s)}let h={origin:e[7][Math.floor(e[46]/8)][e[46]%8].origin,position:{x:e[46]%8,y:Math.floor(e[46]/8)},$$slots:{default:[Bt]},$$scope:{ctx:e}};return e[7]!==void 0&&(h.field_array=e[7]),f=new le({props:h}),K.push(()=>Q(f,"field_array",_)),{c(){F(f.$$.fragment)},m(s,l){H(f,s,l),u=!0},p(s,l){const n={};l[0]&128&&(n.origin=s[7][Math.floor(s[46]/8)][s[46]%8].origin),l[0]&491|l[1]&65536&&(n.$$scope={dirty:l,ctx:s}),!t&&l[0]&128&&(t=!0,n.field_array=s[7],B(()=>t=!1)),f.$set(n)},i(s){u||(q(f.$$.fragment,s),u=!0)},o(s){O(f.$$.fragment,s),u=!1},d(s){I(f,s)}}}function Et(e){let f="",t,u,_=e[7][Math.floor(e[46]/8)][e[46]%8].is_highlight,h,s,l=_&&ve(e);return{c(){t=re(f),u=z(),l&&l.c(),h=be()},m(n,i){j(n,t,i),j(n,u,i),l&&l.m(n,i),j(n,h,i),s=!0},p(n,i){i[0]&128&&(_=n[7][Math.floor(n[46]/8)][n[46]%8].is_highlight),_?l?(l.p(n,i),i[0]&128&&q(l,1)):(l=ve(n),l.c(),q(l,1),l.m(h.parentNode,h)):l&&($(),O(l,1,1,()=>{l=null}),ee())},i(n){s||(q(l),s=!0)},o(n){O(l),s=!1},d(n){n&&(S(t),S(u),S(h)),l&&l.d(n)}}}function Bt(e){let f,t,u,_,h,s;function l(r){e[19](r)}function n(r){e[20](r)}function i(r){e[21](r)}function c(r){e[22](r)}let g={type:e[7][Math.floor(e[46]/8)][e[46]%8].figure,team:e[7][Math.floor(e[46]/8)][e[46]%8].team,position:{x:e[46]%8,y:Math.floor(e[46]/8)},move_to:e[7][Math.floor(e[46]/8)][e[46]%8].move_to,own_team:e[0],enemy_team:e[1],prevent_positions:e[3]};return e[5]!==void 0&&(g.current_team=e[5]),e[7]!==void 0&&(g.field_array=e[7]),e[6]!==void 0&&(g.moved=e[6]),e[8]!==void 0&&(g.highlight_active=e[8]),f=new ne({props:g}),K.push(()=>Q(f,"current_team",l)),K.push(()=>Q(f,"field_array",n)),K.push(()=>Q(f,"moved",i)),K.push(()=>Q(f,"highlight_active",c)),{c(){F(f.$$.fragment)},m(r,a){H(f,r,a),s=!0},p(r,a){const p={};a[0]&128&&(p.type=r[7][Math.floor(r[46]/8)][r[46]%8].figure),a[0]&128&&(p.team=r[7][Math.floor(r[46]/8)][r[46]%8].team),a[0]&128&&(p.move_to=r[7][Math.floor(r[46]/8)][r[46]%8].move_to),a[0]&1&&(p.own_team=r[0]),a[0]&2&&(p.enemy_team=r[1]),a[0]&8&&(p.prevent_positions=r[3]),!t&&a[0]&32&&(t=!0,p.current_team=r[5],B(()=>t=!1)),!u&&a[0]&128&&(u=!0,p.field_array=r[7],B(()=>u=!1)),!_&&a[0]&64&&(_=!0,p.moved=r[6],B(()=>_=!1)),!h&&a[0]&256&&(h=!0,p.highlight_active=r[8],B(()=>h=!1)),f.$set(p)},i(r){s||(q(f.$$.fragment,r),s=!0)},o(r){O(f.$$.fragment,r),s=!1},d(r){I(f,r)}}}function ve(e){let f,t,u;function _(s){e[18](s)}let h={origin:e[7][Math.floor(e[46]/8)][e[46]%8].origin,position:{x:e[46]%8,y:Math.floor(e[46]/8)}};return e[7]!==void 0&&(h.field_array=e[7]),f=new le({props:h}),K.push(()=>Q(f,"field_array",_)),{c(){F(f.$$.fragment)},m(s,l){H(f,s,l),u=!0},p(s,l){const n={};l[0]&128&&(n.origin=s[7][Math.floor(s[46]/8)][s[46]%8].origin),!t&&l[0]&128&&(t=!0,n.field_array=s[7],B(()=>t=!1)),f.$set(n)},i(s){u||(q(f.$$.fragment,s),u=!0)},o(s){O(f.$$.fragment,s),u=!1},d(s){I(f,s)}}}function Ke(e){let f,t,u,_;const h=[yt,dt],s=[];function l(n,i){return(n[46]+Math.floor(n[46]/8))%2==0?0:1}return f=l(e),t=s[f]=h[f](e),{c(){t.c(),u=be()},m(n,i){s[f].m(n,i),j(n,u,i),_=!0},p(n,i){t.p(n,i)},i(n){_||(q(t),_=!0)},o(n){O(t),_=!1},d(n){n&&S(u),s[f].d(n)}}}function qe(e){let f,t,u,_,h;return{c(){f=L("div"),t=L("div"),u=L("button"),u.textContent="Join",R(u,"class","overlay-text svelte-9e2cii"),R(t,"class","overlay-container svelte-9e2cii"),R(f,"class","GameOverScreen svelte-9e2cii")},m(s,l){j(s,f,l),A(f,t),A(t,u),_||(h=pe(u,"click",e[38]),_=!0)},p:J,d(s){s&&S(f),_=!1,h()}}}function Qt(e){let f,t,u,_,h,s,l,n,i,c;function g(y){e[16](y)}function r(y){e[17](y)}let a={};e[3]!==void 0&&(a.prevent_position=e[3]),e[4]!==void 0&&(a.check_list=e[4]),t=new Pe({props:a}),e[15](t),K.push(()=>Q(t,"prevent_position",g)),K.push(()=>Q(t,"check_list",r));let p=ke({length:64}),M=[];for(let y=0;y<p.length;y+=1)M[y]=Ke(we(e,p,y));const v=y=>O(M[y],1,1,()=>{M[y]=null});let d=e[9]&&qe(e);return{c(){f=L("main"),F(t.$$.fragment),h=z(),s=L("div"),l=L("div");for(let y=0;y<M.length;y+=1)M[y].c();n=z(),i=L("div"),d&&d.c(),R(l,"class","chess-board svelte-9e2cii"),R(s,"class","board-container svelte-9e2cii")},m(y,E){j(y,f,E),H(t,f,null),A(f,h),A(f,s),A(s,l);for(let C=0;C<M.length;C+=1)M[C]&&M[C].m(l,null);A(f,n),A(f,i),d&&d.m(i,null),c=!0},p(y,E){const C={};if(!u&&E[0]&8&&(u=!0,C.prevent_position=y[3],B(()=>u=!1)),!_&&E[0]&16&&(_=!0,C.check_list=y[4],B(()=>_=!1)),t.$set(C),E[0]&491){p=ke({length:64});let m;for(m=0;m<p.length;m+=1){const k=we(y,p,m);M[m]?(M[m].p(k,E),q(M[m],1)):(M[m]=Ke(k),M[m].c(),q(M[m],1),M[m].m(l,null))}for($(),m=p.length;m<M.length;m+=1)v(m);ee()}y[9]?d?d.p(y,E):(d=qe(y),d.c(),d.m(i,null)):d&&(d.d(1),d=null)},i(y){if(!c){q(t.$$.fragment,y);for(let E=0;E<p.length;E+=1)q(M[E]);c=!0}},o(y){O(t.$$.fragment,y),M=M.filter(Boolean);for(let E=0;E<M.length;E+=1)O(M[E]);c=!1},d(y){y&&S(f),e[15](null),I(t),rt(M,y),d&&d.d()}}}function Ot(e,f,t){let u,_;const h=pt(),s=h.getResponse();xe(e,s,b=>t(14,_=b));let l,n,i={x:0,y:0},c,g,r,a=!1;function p(b){if(console.log("message: "+b),b=="black")t(0,l="black"),t(1,n="white"),E("black"),C("white");else if(b=="white")t(0,l="white"),t(1,n="black"),E("white"),C("black");else if(b!="none")if(b==0)console.log("0");else{let N=JSON.parse(b);l!=N.team&&(console.log("PLACE ENEMY"+l),v=="white"?t(5,v="black"):v=="black"&&t(5,v="white"),t(7,m[N.old_pos.y][N.old_pos.x].move_to={bool:!0,pos:N.new_pos},m),t(7,m))}}let M=!0,v="white",d={bool:!1,old_pos:{y:0,x:0},new_pos:{y:0,x:0}};function y(b){b=="which team"&&t(9,M=!1),h.sendMessage(b)}function E(b){for(let N=0;N<8;N++)t(7,m[6][N]={figure:"Pawn",team:b,move_to:{bool:!1},origin_pos:!0},m);t(7,m[7][0]={figure:"Rook",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[7][7]={figure:"Rook",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[7][1]={figure:"Knight",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[7][6]={figure:"Knight",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[7][2]={figure:"Bishop",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[7][5]={figure:"Bishop",team:b,move_to:{bool:!1},origin_pos:!0},m),b=="white"?(t(7,m[7][3]={figure:"Queen",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[7][4]={figure:"King",team:b,move_to:{bool:!1},origin_pos:!0},m)):(t(7,m[7][4]={figure:"Queen",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[7][3]={figure:"King",team:b,move_to:{bool:!1},origin_pos:!0},m))}function C(b){for(let N=0;N<8;N++)t(7,m[1][N]={figure:"Pawn",team:b,move_to:{bool:!1},origin_pos:!0},m);t(7,m[0][0]={figure:"Rook",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[0][7]={figure:"Rook",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[0][1]={figure:"Knight",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[0][6]={figure:"Knight",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[0][2]={figure:"Bishop",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[0][5]={figure:"Bishop",team:b,move_to:{bool:!1},origin_pos:!0},m),b=="black"?(t(7,m[0][3]={figure:"Queen",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[0][4]={figure:"King",team:b,move_to:{bool:!1},origin_pos:!0},m)):(t(7,m[0][4]={figure:"Queen",team:b,move_to:{bool:!1},origin_pos:!0},m),t(7,m[0][3]={figure:"King",team:b,move_to:{bool:!1},origin_pos:!0},m))}let m=[];for(let b=0;b<8;b++){m.push([]);for(let N=0;N<8;N++)m[b].push({figure:"none",move_to:{bool:!1},is_highlight:!1,origin_pos:!1})}m=m;function k(b){K[b?"unshift":"push"](()=>{c=b,t(2,c)})}function w(b){g=b,t(3,g)}function ue(b){r=b,t(4,r)}function se(b){m=b,t(7,m)}function o(b){v=b,t(5,v),t(6,d),t(7,m),t(0,l),t(1,n),t(2,c),t(12,i),t(4,r),t(3,g)}function P(b){m=b,t(7,m)}function D(b){d=b,t(6,d),t(7,m),t(0,l),t(1,n),t(2,c),t(12,i),t(4,r),t(3,g),t(5,v)}function G(b){a=b,t(8,a)}function Re(b){m=b,t(7,m)}function Ne(b){v=b,t(5,v),t(6,d),t(7,m),t(0,l),t(1,n),t(2,c),t(12,i),t(4,r),t(3,g)}function Se(b){m=b,t(7,m)}function Ce(b){d=b,t(6,d),t(7,m),t(0,l),t(1,n),t(2,c),t(12,i),t(4,r),t(3,g),t(5,v)}function Ae(b){a=b,t(8,a)}function Le(b){m=b,t(7,m)}function je(b){v=b,t(5,v),t(6,d),t(7,m),t(0,l),t(1,n),t(2,c),t(12,i),t(4,r),t(3,g)}function He(b){m=b,t(7,m)}function Ie(b){d=b,t(6,d),t(7,m),t(0,l),t(1,n),t(2,c),t(12,i),t(4,r),t(3,g),t(5,v)}function Fe(b){a=b,t(8,a)}function Je(b){m=b,t(7,m)}function ze(b){v=b,t(5,v),t(6,d),t(7,m),t(0,l),t(1,n),t(2,c),t(12,i),t(4,r),t(3,g)}function Ge(b){m=b,t(7,m)}function Te(b){d=b,t(6,d),t(7,m),t(0,l),t(1,n),t(2,c),t(12,i),t(4,r),t(3,g),t(5,v)}function Ue(b){a=b,t(8,a)}const Ve=()=>y("which team");return e.$$.update=()=>{if(e.$$.dirty[0]&16384&&t(13,u=_.toString()),e.$$.dirty[0]&8192&&p(u),e.$$.dirty[0]&4351&&d.bool&&(m[d.new_pos.y][d.new_pos.x].figure=="King"&&m[d.new_pos.y][d.new_pos.x].team==l&&t(12,i=d.new_pos),m[d.new_pos.y][d.new_pos.x].team==n&&(c.check_check(m,i,l,n),r[0]&&(console.log("get prevent pos"),c.get_check_prevent_position(i),console.log(g)),t(6,d.bool=!1,d)),m[d.new_pos.y][d.new_pos.x].team==l)){let b=JSON.stringify({team:l,old_pos:{y:Math.abs(d.old_pos.y-7),x:Math.abs(d.old_pos.x-7)},new_pos:{y:Math.abs(d.new_pos.y-7),x:Math.abs(d.new_pos.x-7)}});y(b),v=="white"?t(5,v="black"):v=="black"&&t(5,v="white"),t(6,d.bool=!1,d)}},[l,n,c,g,r,v,d,m,a,M,s,y,i,u,_,k,w,ue,se,o,P,D,G,Re,Ne,Se,Ce,Ae,Le,je,He,Ie,Fe,Je,ze,Ge,Te,Ue,Ve]}class Pt extends ie{constructor(f){super(),oe(this,f,Ot,Qt,x,{},null,[-1,-1])}}new Pt({target:document.getElementById("app")});
