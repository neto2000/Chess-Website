var Re=Object.defineProperty;var qe=(e,t,i)=>t in e?Re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var x=(e,t,i)=>(qe(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))f(l);new MutationObserver(l=>{for(const _ of l)if(_.type==="childList")for(const a of _.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&f(a)}).observe(document,{childList:!0,subtree:!0});function i(l){const _={};return l.integrity&&(_.integrity=l.integrity),l.referrerPolicy&&(_.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?_.credentials="include":l.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function f(l){if(l.ep)return;l.ep=!0;const _=i(l);fetch(l.href,_)}})();function A(){}function Ce(e,t){for(const i in t)e[i]=t[i];return e}function pe(e){return e()}function ae(){return Object.create(null)}function G(e){e.forEach(pe)}function be(e){return typeof e=="function"}function X(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let W;function te(e,t){return e===t?!0:(W||(W=document.createElement("a")),W.href=t,e===W.href)}function Ie(e){return Object.keys(e).length===0}function Qe(e,...t){if(e==null){for(const f of t)f(void 0);return A}const i=e.subscribe(...t);return i.unsubscribe?()=>i.unsubscribe():i}function Fe(e,t,i){e.$$.on_destroy.push(Qe(t,i))}function Je(e,t,i,f){if(e){const l=ye(e,t,i,f);return e[0](l)}}function ye(e,t,i,f){return e[1]&&f?Ce(i.ctx.slice(),e[1](f(t))):i.ctx}function ze(e,t,i,f){if(e[2]&&f){const l=e[2](f(i));if(t.dirty===void 0)return l;if(typeof l=="object"){const _=[],a=Math.max(t.dirty.length,l.length);for(let r=0;r<a;r+=1)_[r]=t.dirty[r]|l[r];return _}return t.dirty|l}return t.dirty}function He(e,t,i,f,l,_){if(l){const a=ye(t,i,f,_);e.p(a,l)}}function Ge(e){if(e.ctx.length>32){const t=[],i=e.ctx.length/32;for(let f=0;f<i;f++)t[f]=-1;return t}return-1}function B(e,t){e.appendChild(t)}function P(e,t,i){e.insertBefore(t,i||null)}function N(e){e.parentNode&&e.parentNode.removeChild(e)}function Te(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function K(e){return document.createElement(e)}function Y(e){return document.createTextNode(e)}function z(){return Y(" ")}function ne(){return Y("")}function fe(e,t,i,f){return e.addEventListener(t,i,f),()=>e.removeEventListener(t,i,f)}function M(e,t,i){i==null?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function Ue(e){return Array.from(e.childNodes)}let le;function H(e){le=e}const F=[],w=[];let J=[];const ie=[],Ve=Promise.resolve();let oe=!1;function We(){oe||(oe=!0,Ve.then(ke))}function re(e){J.push(e)}function E(e){ie.push(e)}const ee=new Set;let I=0;function ke(){if(I!==0)return;const e=le;do{try{for(;I<F.length;){const t=F[I];I++,H(t),De(t.$$)}}catch(t){throw F.length=0,I=0,t}for(H(null),F.length=0,I=0;w.length;)w.pop()();for(let t=0;t<J.length;t+=1){const i=J[t];ee.has(i)||(ee.add(i),i())}J.length=0}while(F.length);for(;ie.length;)ie.pop()();oe=!1,ee.clear(),H(e)}function De(e){if(e.fragment!==null){e.update(),G(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(re)}}function Xe(e){const t=[],i=[];J.forEach(f=>e.indexOf(f)===-1?t.push(f):i.push(f)),i.forEach(f=>f()),J=t}const D=new Set;let C;function T(){C={r:0,c:[],p:C}}function U(){C.r||G(C.c),C=C.p}function y(e,t){e&&e.i&&(D.delete(e),e.i(t))}function k(e,t,i,f){if(e&&e.o){if(D.has(e))return;D.add(e),C.c.push(()=>{D.delete(e),f&&(i&&e.d(1),f())}),e.o(t)}else f&&f()}function _e(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function O(e,t,i){const f=e.$$.props[t];f!==void 0&&(e.$$.bound[f]=i,i(e.$$.ctx[f]))}function q(e){e&&e.c()}function L(e,t,i){const{fragment:f,after_update:l}=e.$$;f&&f.m(t,i),re(()=>{const _=e.$$.on_mount.map(pe).filter(be);e.$$.on_destroy?e.$$.on_destroy.push(..._):G(_),e.$$.on_mount=[]}),l.forEach(re)}function R(e,t){const i=e.$$;i.fragment!==null&&(Xe(i.after_update),G(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function Ye(e,t){e.$$.dirty[0]===-1&&(F.push(e),We(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ue(e,t,i,f,l,_,a,r=[-1]){const u=le;H(e);const g=e.$$={fragment:null,ctx:[],props:_,update:A,not_equal:l,bound:ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:ae(),dirty:r,skip_bound:!1,root:t.target||u.$$.root};a&&a(g.root);let n=!1;if(g.ctx=i?i(e,t.props||{},(s,h,...d)=>{const j=d.length?d[0]:h;return g.ctx&&l(g.ctx[s],g.ctx[s]=j)&&(!g.skip_bound&&g.bound[s]&&g.bound[s](j),n&&Ye(e,s)),h}):[],g.update(),n=!0,G(g.before_update),g.fragment=f?f(g.ctx):!1,t.target){if(t.hydrate){const s=Ue(t.target);g.fragment&&g.fragment.l(s),s.forEach(N)}else g.fragment&&g.fragment.c();t.intro&&y(e.$$.fragment),L(e,t.target,t.anchor),ke()}H(u)}class se{constructor(){x(this,"$$");x(this,"$$set")}$destroy(){R(this,1),this.$destroy=A}$on(t,i){if(!be(i))return A;const f=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return f.push(i),()=>{const l=f.indexOf(i);l!==-1&&f.splice(l,1)}}$set(t){this.$$set&&!Ie(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ze="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ze);function $e(e){let t,i,f,l,_;return{c(){t=K("button"),i=K("img"),M(i,"class","figure-image svelte-1rysv6i"),te(i.src,f=e[1]+e[0]+".png")||M(i,"src",f),M(i,"alt",""),M(t,"class","figure-button svelte-1rysv6i")},m(a,r){P(a,t,r),B(t,i),l||(_=fe(t,"click",e[2]),l=!0)},p(a,[r]){r&3&&!te(i.src,f=a[1]+a[0]+".png")&&M(i,"src",f)},i:A,o:A,d(a){a&&N(t),l=!1,_()}}}function xe(e,t,i){let f,{type:l}=t,{team:_}=t,{current_team:a}=t,{position:r={x:0,y:0}}=t,{field_array:u}=t,{move_to:g={bool:!1}}=t,{moved:n}=t,{own_team:s}=t,{enemy_team:h}=t,d=!1;function j(){if(a!=_||s!=_){console.log("cur: "+a+", team: "+_);return}d?c():V()}function V(){if(console.log("show highlight"),l=="King"){for(let o=-1;o<2;o++)p(-1,o);p(0,-1),p(0,1);for(let o=-1;o<2;o++)p(1,o)}else if(l=="Rook"){for(let o=-1;o>-8&&p(o,0)!=!1;o--);for(let o=1;o<8&&p(o,0)!=!1;o++);for(let o=-1;o>-8&&p(0,o)!=!1;o--);for(let o=1;o<8&&p(0,o)!=!1;o++);}else if(l=="Bishop"){for(let o=-1;o>-8&&p(o,o)!=!1;o--);for(let o=1;o<8&&p(o,o)!=!1;o++);for(let o=-1;o>-8&&p(-o,o)!=!1;o--);for(let o=1;o<8&&p(-o,o)!=!1;o++);}else if(l=="Queen"){for(let o=-1;o>-8&&p(o,o)!=!1;o--);for(let o=1;o<8&&p(o,o)!=!1;o++);for(let o=-1;o>-8&&p(-o,o)!=!1;o--);for(let o=1;o<8&&p(-o,o)!=!1;o++);for(let o=-1;o>-8&&p(o,0)!=!1;o--);for(let o=1;o<8&&p(o,0)!=!1;o++);for(let o=-1;o>-8&&p(0,o)!=!1;o--);for(let o=1;o<8&&p(0,o)!=!1;o++);}else if(l=="Knight")p(-2,-1),p(-2,1),p(2,-1),p(2,1),p(-1,-2),p(1,-2),p(-1,2),p(1,2);else if(l=="Pawn"){for(let o=-1;o<2;o+=2)r.y-1<0||r.x+o<0||r.x+o>7||u[r.y-1][r.x+o].team==h&&p(-1,o);u[r.y-1][r.x].team!=h&&(u[r.y][r.x].origin_pos&&p(-2,0),p(-1,0))}else p(-1,0)}function c(){if(l=="King"){for(let o=-1;o<2;o++)b(-1,o);b(0,-1),b(0,1);for(let o=-1;o<2;o++)b(1,o)}else if(l=="Rook"){for(let o=-1;o>-8&&b(o,0)!=!1;o--);for(let o=1;o<8&&b(o,0)!=!1;o++);for(let o=-1;o>-8&&b(0,o)!=!1;o--);for(let o=1;o<8&&b(0,o)!=!1;o++);}else if(l=="Bishop"){for(let o=-1;o>-8&&b(o,o)!=!1;o--);for(let o=1;o<8&&b(o,o)!=!1;o++);for(let o=-1;o>-8&&b(-o,o)!=!1;o--);for(let o=1;o<8&&b(-o,o)!=!1;o++);}else if(l=="Queen"){for(let o=-1;o>-8&&b(o,o)!=!1;o--);for(let o=1;o<8&&b(o,o)!=!1;o++);for(let o=-1;o>-8&&b(-o,o)!=!1;o--);for(let o=1;o<8&&b(-o,o)!=!1;o++);for(let o=-1;o>-8&&b(o,0)!=!1;o--);for(let o=1;o<8&&b(o,0)!=!1;o++);for(let o=-1;o>-8&&b(0,o)!=!1;o--);for(let o=1;o<8&&b(0,o)!=!1;o++);}else if(l=="Knight")b(-2,-1),b(-2,1),b(2,-1),b(2,1),b(-1,-2),b(1,-2),b(-1,2),b(1,2);else if(l=="Pawn"){for(let o=-1;o<2;o+=2)r.y-1<0||r.x+o<0||r.x+o>7||u[r.y-1][r.x+o].team==h&&b(-1,o);u[r.y-1][r.x].team!=h&&(u[r.y][r.x].origin_pos&&b(-2,0),b(-1,0))}else b(-1,0)}function p(o,S){return console.log("PLACE "+o+" "+S),r.y+o>=0&&r.y+o<=7&&r.x+S>=0&&r.x+S<=7?u[r.y+o][r.x+S].team==_?(console.log("own team!"),!1):(i(4,u[r.y+o][r.x+S].is_highlight=!0,u),i(4,u[r.y+o][r.x+S].origin=r,u),d=!0,u[r.y+o][r.x+S].team!=h):(console.log("out of bounds!"),!1)}function b(o,S){return r.y+o>=0&&r.y+o<=7&&r.x+S>=0&&r.x+S<=7?!(u[r.y+o][r.x+S].team==_||(i(4,u[r.y+o][r.x+S].is_highlight=!1,u),d=!1,u[r.y+o][r.x+S].team==h)):!1}return e.$$set=o=>{"type"in o&&i(0,l=o.type),"team"in o&&i(6,_=o.team),"current_team"in o&&i(7,a=o.current_team),"position"in o&&i(8,r=o.position),"field_array"in o&&i(4,u=o.field_array),"move_to"in o&&i(3,g=o.move_to),"moved"in o&&i(5,n=o.moved),"own_team"in o&&i(9,s=o.own_team),"enemy_team"in o&&i(10,h=o.enemy_team)},e.$$.update=()=>{e.$$.dirty&64&&i(1,f="/images/"+_+"-pixel/"),e.$$.dirty&329&&g.bool&&(i(3,g.bool=!1,g),console.log("move figure"),c(),i(4,u[r.y][r.x]={figure:"none",is_highlight:!1,origin_pos:!1},u),i(4,u[g.pos.y][g.pos.x]={figure:l,team:_,move_to:{bool:!1},is_highlight:!1,origin_pos:!1},u),i(5,n={bool:!0,old_pos:r,new_pos:g.pos}))},[l,f,j,g,u,n,_,a,r,s,h]}class Z extends se{constructor(t){super(),ue(this,t,xe,$e,X,{type:0,team:6,current_team:7,position:8,field_array:4,move_to:3,moved:5,own_team:9,enemy_team:10})}}function et(e){let t,i,f,l,_,a,r;const u=e[5].default,g=Je(u,e,e[4],null);return{c(){t=K("button"),i=K("img"),l=z(),g&&g.c(),M(i,"class","highlight-image svelte-1h4ejhx"),te(i.src,f="/images/highlight.svg")||M(i,"src",f),M(i,"alt",""),M(t,"class","highlight-button svelte-1h4ejhx")},m(n,s){P(n,t,s),B(t,i),B(t,l),g&&g.m(t,null),_=!0,a||(r=fe(t,"click",e[0]),a=!0)},p(n,[s]){g&&g.p&&(!_||s&16)&&He(g,u,n,n[4],_?ze(u,n[4],s,null):Ge(n[4]),null)},i(n){_||(y(g,n),_=!0)},o(n){k(g,n),_=!1},d(n){n&&N(t),g&&g.d(n),a=!1,r()}}}function tt(e,t,i){let{$$slots:f={},$$scope:l}=t,{origin:_={x:0,y:0}}=t,{field_array:a}=t,{position:r}=t;function u(){i(1,a[_.y][_.x].move_to={bool:!0,pos:r},a),i(1,a),console.log("move from ")}return e.$$set=g=>{"origin"in g&&i(2,_=g.origin),"field_array"in g&&i(1,a=g.field_array),"position"in g&&i(3,r=g.position),"$$scope"in g&&i(4,l=g.$$scope)},[u,a,_,r,l,f]}class $ extends se{constructor(t){super(),ue(this,t,tt,et,X,{origin:2,field_array:1,position:3})}}const Q=[];function it(e,t=A){let i;const f=new Set;function l(r){if(X(e,r)&&(e=r,i)){const u=!Q.length;for(const g of f)g[1](),Q.push(g,e);if(u){for(let g=0;g<Q.length;g+=2)Q[g][0](Q[g+1]);Q.length=0}}}function _(r){l(r(e))}function a(r,u=A){const g=[r,u];return f.add(g),f.size===1&&(i=t(l,_)||A),r(e),()=>{f.delete(g),f.size===0&&i&&(i(),i=null)}}return{set:l,update:_,subscribe:a}}const ot=()=>{let e=new WebSocket("ws://localhost:9000/ws");const t=it(0),i=()=>t,f=l=>{console.log("send"),e.send(l)};return e.onmessage=function(l){t.set(l.data)},{getResponse:i,sendMessage:f}};function ge(e,t,i){const f=e.slice();return f[32]=t[i],f[34]=i,f}function rt(e){let t,i,f,l,_,a,r;const u=[ut,lt,ft],g=[];function n(s,h){return h[0]&32&&(i=null),h[0]&32&&(f=null),i==null&&(i=s[5][Math.floor(s[34]/8)][s[34]%8].figure=="none"),i?0:(f==null&&(f=!!s[5][Math.floor(s[34]/8)][s[34]%8].is_highlight),f?1:2)}return l=n(e,[-1,-1]),_=g[l]=u[l](e),{c(){t=K("div"),_.c(),a=z(),M(t,"class","square-odd svelte-9e2cii")},m(s,h){P(s,t,h),g[l].m(t,null),B(t,a),r=!0},p(s,h){let d=l;l=n(s,h),l===d?g[l].p(s,h):(T(),k(g[d],1,1,()=>{g[d]=null}),U(),_=g[l],_?_.p(s,h):(_=g[l]=u[l](s),_.c()),y(_,1),_.m(t,a))},i(s){r||(y(_),r=!0)},o(s){k(_),r=!1},d(s){s&&N(t),g[l].d()}}}function nt(e){let t,i,f,l,_,a,r;const u=[gt,_t,at],g=[];function n(s,h){return h[0]&32&&(i=null),h[0]&32&&(f=null),i==null&&(i=s[5][Math.floor(s[34]/8)][s[34]%8].figure=="none"),i?0:(f==null&&(f=!!s[5][Math.floor(s[34]/8)][s[34]%8].is_highlight),f?1:2)}return l=n(e,[-1,-1]),_=g[l]=u[l](e),{c(){t=K("div"),_.c(),a=z(),M(t,"class","square-even svelte-9e2cii")},m(s,h){P(s,t,h),g[l].m(t,null),B(t,a),r=!0},p(s,h){let d=l;l=n(s,h),l===d?g[l].p(s,h):(T(),k(g[d],1,1,()=>{g[d]=null}),U(),_=g[l],_?_.p(s,h):(_=g[l]=u[l](s),_.c()),y(_,1),_.m(t,a))},i(s){r||(y(_),r=!0)},o(s){k(_),r=!1},d(s){s&&N(t),g[l].d()}}}function ft(e){let t,i,f,l,_;function a(n){e[23](n)}function r(n){e[24](n)}function u(n){e[25](n)}let g={type:e[5][Math.floor(e[34]/8)][e[34]%8].figure,team:e[5][Math.floor(e[34]/8)][e[34]%8].team,position:{x:e[34]%8,y:Math.floor(e[34]/8)},move_to:e[5][Math.floor(e[34]/8)][e[34]%8].move_to,own_team:e[0],enemy_team:e[3]};return e[1]!==void 0&&(g.current_team=e[1]),e[5]!==void 0&&(g.field_array=e[5]),e[2]!==void 0&&(g.moved=e[2]),t=new Z({props:g}),w.push(()=>O(t,"current_team",a)),w.push(()=>O(t,"field_array",r)),w.push(()=>O(t,"moved",u)),{c(){q(t.$$.fragment)},m(n,s){L(t,n,s),_=!0},p(n,s){const h={};s[0]&32&&(h.type=n[5][Math.floor(n[34]/8)][n[34]%8].figure),s[0]&32&&(h.team=n[5][Math.floor(n[34]/8)][n[34]%8].team),s[0]&32&&(h.move_to=n[5][Math.floor(n[34]/8)][n[34]%8].move_to),s[0]&1&&(h.own_team=n[0]),s[0]&8&&(h.enemy_team=n[3]),!i&&s[0]&2&&(i=!0,h.current_team=n[1],E(()=>i=!1)),!f&&s[0]&32&&(f=!0,h.field_array=n[5],E(()=>f=!1)),!l&&s[0]&4&&(l=!0,h.moved=n[2],E(()=>l=!1)),t.$set(h)},i(n){_||(y(t.$$.fragment,n),_=!0)},o(n){k(t.$$.fragment,n),_=!1},d(n){R(t,n)}}}function lt(e){let t,i,f;function l(a){e[22](a)}let _={origin:e[5][Math.floor(e[34]/8)][e[34]%8].origin,position:{x:e[34]%8,y:Math.floor(e[34]/8)},$$slots:{default:[st]},$$scope:{ctx:e}};return e[5]!==void 0&&(_.field_array=e[5]),t=new $({props:_}),w.push(()=>O(t,"field_array",l)),{c(){q(t.$$.fragment)},m(a,r){L(t,a,r),f=!0},p(a,r){const u={};r[0]&32&&(u.origin=a[5][Math.floor(a[34]/8)][a[34]%8].origin),r[0]&47|r[1]&16&&(u.$$scope={dirty:r,ctx:a}),!i&&r[0]&32&&(i=!0,u.field_array=a[5],E(()=>i=!1)),t.$set(u)},i(a){f||(y(t.$$.fragment,a),f=!0)},o(a){k(t.$$.fragment,a),f=!1},d(a){R(t,a)}}}function ut(e){let t="",i,f,l=e[5][Math.floor(e[34]/8)][e[34]%8].is_highlight,_,a,r=l&&he(e);return{c(){i=Y(t),f=z(),r&&r.c(),_=ne()},m(u,g){P(u,i,g),P(u,f,g),r&&r.m(u,g),P(u,_,g),a=!0},p(u,g){g[0]&32&&(l=u[5][Math.floor(u[34]/8)][u[34]%8].is_highlight),l?r?(r.p(u,g),g[0]&32&&y(r,1)):(r=he(u),r.c(),y(r,1),r.m(_.parentNode,_)):r&&(T(),k(r,1,1,()=>{r=null}),U())},i(u){a||(y(r),a=!0)},o(u){k(r),a=!1},d(u){u&&(N(i),N(f),N(_)),r&&r.d(u)}}}function st(e){let t,i,f,l,_;function a(n){e[19](n)}function r(n){e[20](n)}function u(n){e[21](n)}let g={type:e[5][Math.floor(e[34]/8)][e[34]%8].figure,team:e[5][Math.floor(e[34]/8)][e[34]%8].team,position:{x:e[34]%8,y:Math.floor(e[34]/8)},move_to:e[5][Math.floor(e[34]/8)][e[34]%8].move_to,own_team:e[0],enemy_team:e[3]};return e[1]!==void 0&&(g.current_team=e[1]),e[5]!==void 0&&(g.field_array=e[5]),e[2]!==void 0&&(g.moved=e[2]),t=new Z({props:g}),w.push(()=>O(t,"current_team",a)),w.push(()=>O(t,"field_array",r)),w.push(()=>O(t,"moved",u)),{c(){q(t.$$.fragment)},m(n,s){L(t,n,s),_=!0},p(n,s){const h={};s[0]&32&&(h.type=n[5][Math.floor(n[34]/8)][n[34]%8].figure),s[0]&32&&(h.team=n[5][Math.floor(n[34]/8)][n[34]%8].team),s[0]&32&&(h.move_to=n[5][Math.floor(n[34]/8)][n[34]%8].move_to),s[0]&1&&(h.own_team=n[0]),s[0]&8&&(h.enemy_team=n[3]),!i&&s[0]&2&&(i=!0,h.current_team=n[1],E(()=>i=!1)),!f&&s[0]&32&&(f=!0,h.field_array=n[5],E(()=>f=!1)),!l&&s[0]&4&&(l=!0,h.moved=n[2],E(()=>l=!1)),t.$set(h)},i(n){_||(y(t.$$.fragment,n),_=!0)},o(n){k(t.$$.fragment,n),_=!1},d(n){R(t,n)}}}function he(e){let t,i,f;function l(a){e[18](a)}let _={origin:e[5][Math.floor(e[34]/8)][e[34]%8].origin,position:{x:e[34]%8,y:Math.floor(e[34]/8)}};return e[5]!==void 0&&(_.field_array=e[5]),t=new $({props:_}),w.push(()=>O(t,"field_array",l)),{c(){q(t.$$.fragment)},m(a,r){L(t,a,r),f=!0},p(a,r){const u={};r[0]&32&&(u.origin=a[5][Math.floor(a[34]/8)][a[34]%8].origin),!i&&r[0]&32&&(i=!0,u.field_array=a[5],E(()=>i=!1)),t.$set(u)},i(a){f||(y(t.$$.fragment,a),f=!0)},o(a){k(t.$$.fragment,a),f=!1},d(a){R(t,a)}}}function at(e){let t,i,f,l,_;function a(n){e[15](n)}function r(n){e[16](n)}function u(n){e[17](n)}let g={type:e[5][Math.floor(e[34]/8)][e[34]%8].figure,team:e[5][Math.floor(e[34]/8)][e[34]%8].team,position:{x:e[34]%8,y:Math.floor(e[34]/8)},move_to:e[5][Math.floor(e[34]/8)][e[34]%8].move_to,own_team:e[0],enemy_team:e[3]};return e[1]!==void 0&&(g.current_team=e[1]),e[5]!==void 0&&(g.field_array=e[5]),e[2]!==void 0&&(g.moved=e[2]),t=new Z({props:g}),w.push(()=>O(t,"current_team",a)),w.push(()=>O(t,"field_array",r)),w.push(()=>O(t,"moved",u)),{c(){q(t.$$.fragment)},m(n,s){L(t,n,s),_=!0},p(n,s){const h={};s[0]&32&&(h.type=n[5][Math.floor(n[34]/8)][n[34]%8].figure),s[0]&32&&(h.team=n[5][Math.floor(n[34]/8)][n[34]%8].team),s[0]&32&&(h.move_to=n[5][Math.floor(n[34]/8)][n[34]%8].move_to),s[0]&1&&(h.own_team=n[0]),s[0]&8&&(h.enemy_team=n[3]),!i&&s[0]&2&&(i=!0,h.current_team=n[1],E(()=>i=!1)),!f&&s[0]&32&&(f=!0,h.field_array=n[5],E(()=>f=!1)),!l&&s[0]&4&&(l=!0,h.moved=n[2],E(()=>l=!1)),t.$set(h)},i(n){_||(y(t.$$.fragment,n),_=!0)},o(n){k(t.$$.fragment,n),_=!1},d(n){R(t,n)}}}function _t(e){let t,i,f;function l(a){e[14](a)}let _={origin:e[5][Math.floor(e[34]/8)][e[34]%8].origin,position:{x:e[34]%8,y:Math.floor(e[34]/8)},$$slots:{default:[ht]},$$scope:{ctx:e}};return e[5]!==void 0&&(_.field_array=e[5]),t=new $({props:_}),w.push(()=>O(t,"field_array",l)),{c(){q(t.$$.fragment)},m(a,r){L(t,a,r),f=!0},p(a,r){const u={};r[0]&32&&(u.origin=a[5][Math.floor(a[34]/8)][a[34]%8].origin),r[0]&47|r[1]&16&&(u.$$scope={dirty:r,ctx:a}),!i&&r[0]&32&&(i=!0,u.field_array=a[5],E(()=>i=!1)),t.$set(u)},i(a){f||(y(t.$$.fragment,a),f=!0)},o(a){k(t.$$.fragment,a),f=!1},d(a){R(t,a)}}}function gt(e){let t="",i,f,l=e[5][Math.floor(e[34]/8)][e[34]%8].is_highlight,_,a,r=l&&me(e);return{c(){i=Y(t),f=z(),r&&r.c(),_=ne()},m(u,g){P(u,i,g),P(u,f,g),r&&r.m(u,g),P(u,_,g),a=!0},p(u,g){g[0]&32&&(l=u[5][Math.floor(u[34]/8)][u[34]%8].is_highlight),l?r?(r.p(u,g),g[0]&32&&y(r,1)):(r=me(u),r.c(),y(r,1),r.m(_.parentNode,_)):r&&(T(),k(r,1,1,()=>{r=null}),U())},i(u){a||(y(r),a=!0)},o(u){k(r),a=!1},d(u){u&&(N(i),N(f),N(_)),r&&r.d(u)}}}function ht(e){let t,i,f,l,_;function a(n){e[11](n)}function r(n){e[12](n)}function u(n){e[13](n)}let g={type:e[5][Math.floor(e[34]/8)][e[34]%8].figure,team:e[5][Math.floor(e[34]/8)][e[34]%8].team,position:{x:e[34]%8,y:Math.floor(e[34]/8)},move_to:e[5][Math.floor(e[34]/8)][e[34]%8].move_to,own_team:e[0],enemy_team:e[3]};return e[1]!==void 0&&(g.current_team=e[1]),e[5]!==void 0&&(g.field_array=e[5]),e[2]!==void 0&&(g.moved=e[2]),t=new Z({props:g}),w.push(()=>O(t,"current_team",a)),w.push(()=>O(t,"field_array",r)),w.push(()=>O(t,"moved",u)),{c(){q(t.$$.fragment)},m(n,s){L(t,n,s),_=!0},p(n,s){const h={};s[0]&32&&(h.type=n[5][Math.floor(n[34]/8)][n[34]%8].figure),s[0]&32&&(h.team=n[5][Math.floor(n[34]/8)][n[34]%8].team),s[0]&32&&(h.move_to=n[5][Math.floor(n[34]/8)][n[34]%8].move_to),s[0]&1&&(h.own_team=n[0]),s[0]&8&&(h.enemy_team=n[3]),!i&&s[0]&2&&(i=!0,h.current_team=n[1],E(()=>i=!1)),!f&&s[0]&32&&(f=!0,h.field_array=n[5],E(()=>f=!1)),!l&&s[0]&4&&(l=!0,h.moved=n[2],E(()=>l=!1)),t.$set(h)},i(n){_||(y(t.$$.fragment,n),_=!0)},o(n){k(t.$$.fragment,n),_=!1},d(n){R(t,n)}}}function me(e){let t,i,f;function l(a){e[10](a)}let _={origin:e[5][Math.floor(e[34]/8)][e[34]%8].origin,position:{x:e[34]%8,y:Math.floor(e[34]/8)}};return e[5]!==void 0&&(_.field_array=e[5]),t=new $({props:_}),w.push(()=>O(t,"field_array",l)),{c(){q(t.$$.fragment)},m(a,r){L(t,a,r),f=!0},p(a,r){const u={};r[0]&32&&(u.origin=a[5][Math.floor(a[34]/8)][a[34]%8].origin),!i&&r[0]&32&&(i=!0,u.field_array=a[5],E(()=>i=!1)),t.$set(u)},i(a){f||(y(t.$$.fragment,a),f=!0)},o(a){k(t.$$.fragment,a),f=!1},d(a){R(t,a)}}}function ce(e){let t,i,f,l;const _=[nt,rt],a=[];function r(u,g){return(u[34]+Math.floor(u[34]/8))%2==0?0:1}return t=r(e),i=a[t]=_[t](e),{c(){i.c(),f=ne()},m(u,g){a[t].m(u,g),P(u,f,g),l=!0},p(u,g){i.p(u,g)},i(u){l||(y(i),l=!0)},o(u){k(i),l=!1},d(u){u&&N(f),a[t].d(u)}}}function de(e){let t,i,f,l,_;return{c(){t=K("div"),i=K("div"),f=K("button"),f.textContent="Join",M(f,"class","overlay-text svelte-9e2cii"),M(i,"class","overlay-container svelte-9e2cii"),M(t,"class","GameOverScreen svelte-9e2cii")},m(a,r){P(a,t,r),B(t,i),B(i,f),l||(_=fe(f,"click",e[26]),l=!0)},p:A,d(a){a&&N(t),l=!1,_()}}}function mt(e){let t,i,f,l,_,a,r=_e({length:64}),u=[];for(let s=0;s<r.length;s+=1)u[s]=ce(ge(e,r,s));const g=s=>k(u[s],1,1,()=>{u[s]=null});let n=e[4]&&de(e);return{c(){t=K("main"),i=K("div"),f=K("div");for(let s=0;s<u.length;s+=1)u[s].c();l=z(),_=K("div"),n&&n.c(),M(f,"class","chess-board svelte-9e2cii"),M(i,"class","board-container svelte-9e2cii")},m(s,h){P(s,t,h),B(t,i),B(i,f);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(f,null);B(t,l),B(t,_),n&&n.m(_,null),a=!0},p(s,h){if(h[0]&47){r=_e({length:64});let d;for(d=0;d<r.length;d+=1){const j=ge(s,r,d);u[d]?(u[d].p(j,h),y(u[d],1)):(u[d]=ce(j),u[d].c(),y(u[d],1),u[d].m(f,null))}for(T(),d=r.length;d<u.length;d+=1)g(d);U()}s[4]?n?n.p(s,h):(n=de(s),n.c(),n.m(_,null)):n&&(n.d(1),n=null)},i(s){if(!a){for(let h=0;h<r.length;h+=1)y(u[h]);a=!0}},o(s){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)k(u[h]);a=!1},d(s){s&&N(t),Te(u,s),n&&n.d()}}}function ct(e,t,i){let f,l;const _=ot(),a=_.getResponse();Fe(e,a,m=>i(9,l=m));let r,u;function g(m){if(console.log("message: "+m),m=="black")i(0,r="black"),i(3,u="white"),j("black"),V("white");else if(m=="white")i(0,r="white"),i(3,u="black"),j("white"),V("black");else if(m!="none")if(m==0)console.log("0");else{let v=JSON.parse(m);console.log("move enemy"),r!=v.team&&(console.log(v),i(5,c[v.old_pos.y][v.old_pos.x].move_to={bool:!0,pos:v.new_pos},c),i(5,c))}}let n=!0,s="white",h={bool:!1,old_pos:{y:0,x:0},new_pos:{y:0,x:0}};function d(m){m=="which team"&&i(4,n=!1),_.sendMessage(m)}function j(m){for(let v=0;v<8;v++)i(5,c[6][v]={figure:"Pawn",team:m,move_to:{bool:!1},origin_pos:!0},c);i(5,c[7][0]={figure:"Rook",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[7][7]={figure:"Rook",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[7][1]={figure:"Knight",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[7][6]={figure:"Knight",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[7][2]={figure:"Bishop",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[7][5]={figure:"Bishop",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[7][3]={figure:"Queen",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[7][4]={figure:"King",team:m,move_to:{bool:!1},origin_pos:!0},c)}function V(m){for(let v=0;v<8;v++)i(5,c[1][v]={figure:"Pawn",team:m,move_to:{bool:!1},origin_pos:!0},c);i(5,c[0][0]={figure:"Rook",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[0][7]={figure:"Rook",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[0][1]={figure:"Knight",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[0][6]={figure:"Knight",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[0][2]={figure:"Bishop",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[0][5]={figure:"Bishop",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[0][3]={figure:"Queen",team:m,move_to:{bool:!1},origin_pos:!0},c),i(5,c[0][4]={figure:"King",team:m,move_to:{bool:!1},origin_pos:!0},c)}let c=[];for(let m=0;m<8;m++){c.push([]);for(let v=0;v<8;v++)c[m].push({figure:"none",move_to:{bool:!1},is_highlight:!1,origin_pos:!1})}c=c;function p(m){c=m,i(5,c)}function b(m){s=m,i(1,s),i(2,h),i(0,r)}function o(m){c=m,i(5,c)}function S(m){h=m,i(2,h),i(0,r),i(1,s)}function we(m){c=m,i(5,c)}function ve(m){s=m,i(1,s),i(2,h),i(0,r)}function Me(m){c=m,i(5,c)}function Ee(m){h=m,i(2,h),i(0,r),i(1,s)}function Oe(m){c=m,i(5,c)}function Se(m){s=m,i(1,s),i(2,h),i(0,r)}function Ne(m){c=m,i(5,c)}function Ke(m){h=m,i(2,h),i(0,r),i(1,s)}function Pe(m){c=m,i(5,c)}function Be(m){s=m,i(1,s),i(2,h),i(0,r)}function je(m){c=m,i(5,c)}function Ae(m){h=m,i(2,h),i(0,r),i(1,s)}const Le=()=>d("which team");return e.$$.update=()=>{if(e.$$.dirty[0]&512&&i(8,f=l.toString()),e.$$.dirty[0]&256&&g(f),e.$$.dirty[0]&7&&h.bool){console.log("moved");let m=JSON.stringify({team:r,old_pos:{y:Math.abs(h.old_pos.y-7),x:Math.abs(h.old_pos.x-7)},new_pos:{y:Math.abs(h.new_pos.y-7),x:Math.abs(h.new_pos.x-7)}});d(m),s=="white"?i(1,s="black"):s=="black"&&i(1,s="white"),i(2,h.bool=!1,h)}},[r,s,h,u,n,c,a,d,f,l,p,b,o,S,we,ve,Me,Ee,Oe,Se,Ne,Ke,Pe,Be,je,Ae,Le]}class dt extends se{constructor(t){super(),ue(this,t,ct,mt,X,{},null,[-1,-1])}}new dt({target:document.getElementById("app")});
