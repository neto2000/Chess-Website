var qe=Object.defineProperty;var Ke=(e,t,n)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $=(e,t,n)=>(Ke(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const _ of s)if(_.type==="childList")for(const f of _.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(s){const _={};return s.integrity&&(_.integrity=s.integrity),s.referrerPolicy&&(_.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?_.credentials="include":s.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function r(s){if(s.ep)return;s.ep=!0;const _=n(s);fetch(s.href,_)}})();function B(){}function Re(e,t){for(const n in t)e[n]=t[n];return e}function de(e){return e()}function se(){return Object.create(null)}function H(e){e.forEach(de)}function pe(e){return typeof e=="function"}function V(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let T;function ee(e,t){return e===t?!0:(T||(T=document.createElement("a")),T.href=t,e===T.href)}function Ce(e){return Object.keys(e).length===0}function Ie(e,...t){if(e==null){for(const r of t)r(void 0);return B}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Fe(e,t,n){e.$$.on_destroy.push(Ie(t,n))}function Je(e,t,n,r){if(e){const s=be(e,t,n,r);return e[0](s)}}function be(e,t,n,r){return e[1]&&r?Re(n.ctx.slice(),e[1](r(t))):n.ctx}function ze(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const _=[],f=Math.max(t.dirty.length,s.length);for(let i=0;i<f;i+=1)_[i]=t.dirty[i]|s[i];return _}return t.dirty|s}return t.dirty}function He(e,t,n,r,s,_){if(s){const f=be(t,n,r,_);e.p(f,s)}}function Qe(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function j(e,t){e.appendChild(t)}function S(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function Ge(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function E(e){return document.createElement(e)}function W(e){return document.createTextNode(e)}function J(){return W(" ")}function ie(){return W("")}function re(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function v(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Te(e){return Array.from(e.childNodes)}let fe;function z(e){fe=e}const I=[],y=[];let F=[];const te=[],Ue=Promise.resolve();let ne=!1;function Ve(){ne||(ne=!0,Ue.then(ye))}function oe(e){F.push(e)}function M(e){te.push(e)}const x=new Set;let R=0;function ye(){if(R!==0)return;const e=fe;do{try{for(;R<I.length;){const t=I[R];R++,z(t),We(t.$$)}}catch(t){throw I.length=0,R=0,t}for(z(null),I.length=0,R=0;y.length;)y.pop()();for(let t=0;t<F.length;t+=1){const n=F[t];x.has(n)||(x.add(n),n())}F.length=0}while(I.length);for(;te.length;)te.pop()();ne=!1,x.clear(),z(e)}function We(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(oe)}}function De(e){const t=[],n=[];F.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),F=t}const U=new Set;let K;function Q(){K={r:0,c:[],p:K}}function G(){K.r||H(K.c),K=K.p}function p(e,t){e&&e.i&&(U.delete(e),e.i(t))}function b(e,t,n,r){if(e&&e.o){if(U.has(e))return;U.add(e),K.c.push(()=>{U.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function _e(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function k(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function q(e){e&&e.c()}function L(e,t,n){const{fragment:r,after_update:s}=e.$$;r&&r.m(t,n),oe(()=>{const _=e.$$.on_mount.map(de).filter(pe);e.$$.on_destroy?e.$$.on_destroy.push(..._):H(_),e.$$.on_mount=[]}),s.forEach(oe)}function P(e,t){const n=e.$$;n.fragment!==null&&(De(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Xe(e,t){e.$$.dirty[0]===-1&&(I.push(e),Ve(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function le(e,t,n,r,s,_,f,i=[-1]){const u=fe;z(e);const a=e.$$={fragment:null,ctx:[],props:_,update:B,not_equal:s,bound:se(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:se(),dirty:i,skip_bound:!1,root:t.target||u.$$.root};f&&f(a.root);let o=!1;if(a.ctx=n?n(e,t.props||{},(l,g,...m)=>{const A=m.length?m[0]:g;return a.ctx&&s(a.ctx[l],a.ctx[l]=A)&&(!a.skip_bound&&a.bound[l]&&a.bound[l](A),o&&Xe(e,l)),g}):[],a.update(),o=!0,H(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const l=Te(t.target);a.fragment&&a.fragment.l(l),l.forEach(O)}else a.fragment&&a.fragment.c();t.intro&&p(e.$$.fragment),L(e,t.target,t.anchor),ye()}z(u)}class ue{constructor(){$(this,"$$");$(this,"$$set")}$destroy(){P(this,1),this.$destroy=B}$on(t,n){if(!pe(n))return B;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!Ce(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ye="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ye);function Ze(e){let t,n,r,s,_;return{c(){t=E("button"),n=E("img"),v(n,"class","figure-image svelte-1rysv6i"),ee(n.src,r=e[1]+e[0]+".png")||v(n,"src",r),v(n,"alt",""),v(t,"class","figure-button svelte-1rysv6i")},m(f,i){S(f,t,i),j(t,n),s||(_=re(t,"click",e[2]),s=!0)},p(f,[i]){i&3&&!ee(n.src,r=f[1]+f[0]+".png")&&v(n,"src",r)},i:B,o:B,d(f){f&&O(t),s=!1,_()}}}function $e(e,t,n){let r,{type:s}=t,{team:_}=t,{current_team:f}=t,{position:i={x:0,y:0}}=t,{field_array:u}=t,{move_to:a={bool:!1}}=t,{moved:o}=t,{own_team:l}=t,g=!1;function m(){if(f!=_||l!=_){console.log("cur: "+f+", team: "+_);return}g?c():A()}function A(){console.log("show highlight"),Y(-1,0)}function c(){Z(-1,0)}function Y(d,N){if(i.y+d>=0&&i.y+d<=8&&i.x+N>=0&&i.x+N<=8){if(u[i.y+d][i.x+N].team==_)return;n(4,u[i.y+d][i.x+N].is_highlight=!0,u),n(4,u[i.y+d][i.x+N].origin=i,u),g=!0}}function Z(d,N){if(i.y+d>=0&&i.y+d<=8&&i.x+N>=0&&i.x+N<=8){if(u[i.y+d][i.x+N].team==_)return;n(4,u[i.y+d][i.x+N].is_highlight=!1,u),g=!1}}return e.$$set=d=>{"type"in d&&n(0,s=d.type),"team"in d&&n(6,_=d.team),"current_team"in d&&n(7,f=d.current_team),"position"in d&&n(8,i=d.position),"field_array"in d&&n(4,u=d.field_array),"move_to"in d&&n(3,a=d.move_to),"moved"in d&&n(5,o=d.moved),"own_team"in d&&n(9,l=d.own_team)},e.$$.update=()=>{e.$$.dirty&64&&n(1,r="/images/"+_+"-pixel/"),e.$$.dirty&329&&a.bool&&(n(3,a.bool=!1,a),console.log("move figure"),c(),n(4,u[i.y][i.x]={figure:"none",is_highlight:!1},u),n(4,u[a.pos.y][a.pos.x]={figure:s,team:_,move_to:{bool:!1},is_highlight:!1},u),n(5,o={bool:!0,old_pos:i,new_pos:a.pos}))},[s,r,m,a,u,o,_,f,i,l]}class D extends ue{constructor(t){super(),le(this,t,$e,Ze,V,{type:0,team:6,current_team:7,position:8,field_array:4,move_to:3,moved:5,own_team:9})}}function xe(e){let t,n,r,s,_,f,i;const u=e[5].default,a=Je(u,e,e[4],null);return{c(){t=E("button"),n=E("img"),s=J(),a&&a.c(),v(n,"class","highlight-image svelte-1h4ejhx"),ee(n.src,r="/images/highlight.svg")||v(n,"src",r),v(n,"alt",""),v(t,"class","highlight-button svelte-1h4ejhx")},m(o,l){S(o,t,l),j(t,n),j(t,s),a&&a.m(t,null),_=!0,f||(i=re(t,"click",e[0]),f=!0)},p(o,[l]){a&&a.p&&(!_||l&16)&&He(a,u,o,o[4],_?ze(u,o[4],l,null):Qe(o[4]),null)},i(o){_||(p(a,o),_=!0)},o(o){b(a,o),_=!1},d(o){o&&O(t),a&&a.d(o),f=!1,i()}}}function et(e,t,n){let{$$slots:r={},$$scope:s}=t,{origin:_={x:0,y:0}}=t,{field_array:f}=t,{position:i}=t;function u(){n(1,f[_.y][_.x].move_to={bool:!0,pos:i},f),n(1,f),console.log("move from ")}return e.$$set=a=>{"origin"in a&&n(2,_=a.origin),"field_array"in a&&n(1,f=a.field_array),"position"in a&&n(3,i=a.position),"$$scope"in a&&n(4,s=a.$$scope)},[u,f,_,i,s,r]}class X extends ue{constructor(t){super(),le(this,t,et,xe,V,{origin:2,field_array:1,position:3})}}const C=[];function tt(e,t=B){let n;const r=new Set;function s(i){if(V(e,i)&&(e=i,n)){const u=!C.length;for(const a of r)a[1](),C.push(a,e);if(u){for(let a=0;a<C.length;a+=2)C[a][0](C[a+1]);C.length=0}}}function _(i){s(i(e))}function f(i,u=B){const a=[i,u];return r.add(a),r.size===1&&(n=t(s,_)||B),i(e),()=>{r.delete(a),r.size===0&&n&&(n(),n=null)}}return{set:s,update:_,subscribe:f}}const nt=()=>{let e=new WebSocket("ws://localhost:9000/ws");const t=tt(0),n=()=>t,r=s=>{console.log("send"),e.send(s)};return e.onmessage=function(s){t.set(s.data)},{getResponse:n,sendMessage:r}};function ae(e,t,n){const r=e.slice();return r[32]=t[n],r[34]=n,r}function ot(e){let t,n,r,s,_,f,i;const u=[lt,ft,rt],a=[];function o(l,g){return g[0]&16&&(n=null),g[0]&16&&(r=null),n==null&&(n=l[4][Math.floor(l[34]/8)][l[34]%8].figure=="none"),n?0:(r==null&&(r=!!l[4][Math.floor(l[34]/8)][l[34]%8].is_highlight),r?1:2)}return s=o(e,[-1,-1]),_=a[s]=u[s](e),{c(){t=E("div"),_.c(),f=J(),v(t,"class","square-odd svelte-9e2cii")},m(l,g){S(l,t,g),a[s].m(t,null),j(t,f),i=!0},p(l,g){let m=s;s=o(l,g),s===m?a[s].p(l,g):(Q(),b(a[m],1,1,()=>{a[m]=null}),G(),_=a[s],_?_.p(l,g):(_=a[s]=u[s](l),_.c()),p(_,1),_.m(t,f))},i(l){i||(p(_),i=!0)},o(l){b(_),i=!1},d(l){l&&O(t),a[s].d()}}}function it(e){let t,n,r,s,_,f,i;const u=[at,_t,st],a=[];function o(l,g){return g[0]&16&&(n=null),g[0]&16&&(r=null),n==null&&(n=l[4][Math.floor(l[34]/8)][l[34]%8].figure=="none"),n?0:(r==null&&(r=!!l[4][Math.floor(l[34]/8)][l[34]%8].is_highlight),r?1:2)}return s=o(e,[-1,-1]),_=a[s]=u[s](e),{c(){t=E("div"),_.c(),f=J(),v(t,"class","square-even svelte-9e2cii")},m(l,g){S(l,t,g),a[s].m(t,null),j(t,f),i=!0},p(l,g){let m=s;s=o(l,g),s===m?a[s].p(l,g):(Q(),b(a[m],1,1,()=>{a[m]=null}),G(),_=a[s],_?_.p(l,g):(_=a[s]=u[s](l),_.c()),p(_,1),_.m(t,f))},i(l){i||(p(_),i=!0)},o(l){b(_),i=!1},d(l){l&&O(t),a[s].d()}}}function rt(e){let t,n,r,s,_;function f(o){e[22](o)}function i(o){e[23](o)}function u(o){e[24](o)}let a={type:e[4][Math.floor(e[34]/8)][e[34]%8].figure,team:e[4][Math.floor(e[34]/8)][e[34]%8].team,position:{x:e[34]%8,y:Math.floor(e[34]/8)},move_to:e[4][Math.floor(e[34]/8)][e[34]%8].move_to,own_team:e[0]};return e[1]!==void 0&&(a.current_team=e[1]),e[4]!==void 0&&(a.field_array=e[4]),e[2]!==void 0&&(a.moved=e[2]),t=new D({props:a}),y.push(()=>k(t,"current_team",f)),y.push(()=>k(t,"field_array",i)),y.push(()=>k(t,"moved",u)),{c(){q(t.$$.fragment)},m(o,l){L(t,o,l),_=!0},p(o,l){const g={};l[0]&16&&(g.type=o[4][Math.floor(o[34]/8)][o[34]%8].figure),l[0]&16&&(g.team=o[4][Math.floor(o[34]/8)][o[34]%8].team),l[0]&16&&(g.move_to=o[4][Math.floor(o[34]/8)][o[34]%8].move_to),l[0]&1&&(g.own_team=o[0]),!n&&l[0]&2&&(n=!0,g.current_team=o[1],M(()=>n=!1)),!r&&l[0]&16&&(r=!0,g.field_array=o[4],M(()=>r=!1)),!s&&l[0]&4&&(s=!0,g.moved=o[2],M(()=>s=!1)),t.$set(g)},i(o){_||(p(t.$$.fragment,o),_=!0)},o(o){b(t.$$.fragment,o),_=!1},d(o){P(t,o)}}}function ft(e){let t,n,r;function s(f){e[21](f)}let _={origin:e[4][Math.floor(e[34]/8)][e[34]%8].origin,position:{x:e[34]%8,y:Math.floor(e[34]/8)},$$slots:{default:[ut]},$$scope:{ctx:e}};return e[4]!==void 0&&(_.field_array=e[4]),t=new X({props:_}),y.push(()=>k(t,"field_array",s)),{c(){q(t.$$.fragment)},m(f,i){L(t,f,i),r=!0},p(f,i){const u={};i[0]&16&&(u.origin=f[4][Math.floor(f[34]/8)][f[34]%8].origin),i[0]&23|i[1]&16&&(u.$$scope={dirty:i,ctx:f}),!n&&i[0]&16&&(n=!0,u.field_array=f[4],M(()=>n=!1)),t.$set(u)},i(f){r||(p(t.$$.fragment,f),r=!0)},o(f){b(t.$$.fragment,f),r=!1},d(f){P(t,f)}}}function lt(e){let t="",n,r,s=e[4][Math.floor(e[34]/8)][e[34]%8].is_highlight,_,f,i=s&&ge(e);return{c(){n=W(t),r=J(),i&&i.c(),_=ie()},m(u,a){S(u,n,a),S(u,r,a),i&&i.m(u,a),S(u,_,a),f=!0},p(u,a){a[0]&16&&(s=u[4][Math.floor(u[34]/8)][u[34]%8].is_highlight),s?i?(i.p(u,a),a[0]&16&&p(i,1)):(i=ge(u),i.c(),p(i,1),i.m(_.parentNode,_)):i&&(Q(),b(i,1,1,()=>{i=null}),G())},i(u){f||(p(i),f=!0)},o(u){b(i),f=!1},d(u){u&&(O(n),O(r),O(_)),i&&i.d(u)}}}function ut(e){let t,n,r,s,_;function f(o){e[18](o)}function i(o){e[19](o)}function u(o){e[20](o)}let a={type:e[4][Math.floor(e[34]/8)][e[34]%8].figure,team:e[4][Math.floor(e[34]/8)][e[34]%8].team,position:{x:e[34]%8,y:Math.floor(e[34]/8)},move_to:e[4][Math.floor(e[34]/8)][e[34]%8].move_to,own_team:e[0]};return e[1]!==void 0&&(a.current_team=e[1]),e[4]!==void 0&&(a.field_array=e[4]),e[2]!==void 0&&(a.moved=e[2]),t=new D({props:a}),y.push(()=>k(t,"current_team",f)),y.push(()=>k(t,"field_array",i)),y.push(()=>k(t,"moved",u)),{c(){q(t.$$.fragment)},m(o,l){L(t,o,l),_=!0},p(o,l){const g={};l[0]&16&&(g.type=o[4][Math.floor(o[34]/8)][o[34]%8].figure),l[0]&16&&(g.team=o[4][Math.floor(o[34]/8)][o[34]%8].team),l[0]&16&&(g.move_to=o[4][Math.floor(o[34]/8)][o[34]%8].move_to),l[0]&1&&(g.own_team=o[0]),!n&&l[0]&2&&(n=!0,g.current_team=o[1],M(()=>n=!1)),!r&&l[0]&16&&(r=!0,g.field_array=o[4],M(()=>r=!1)),!s&&l[0]&4&&(s=!0,g.moved=o[2],M(()=>s=!1)),t.$set(g)},i(o){_||(p(t.$$.fragment,o),_=!0)},o(o){b(t.$$.fragment,o),_=!1},d(o){P(t,o)}}}function ge(e){let t,n,r;function s(f){e[17](f)}let _={origin:e[4][Math.floor(e[34]/8)][e[34]%8].origin,position:{x:e[34]%8,y:Math.floor(e[34]/8)}};return e[4]!==void 0&&(_.field_array=e[4]),t=new X({props:_}),y.push(()=>k(t,"field_array",s)),{c(){q(t.$$.fragment)},m(f,i){L(t,f,i),r=!0},p(f,i){const u={};i[0]&16&&(u.origin=f[4][Math.floor(f[34]/8)][f[34]%8].origin),!n&&i[0]&16&&(n=!0,u.field_array=f[4],M(()=>n=!1)),t.$set(u)},i(f){r||(p(t.$$.fragment,f),r=!0)},o(f){b(t.$$.fragment,f),r=!1},d(f){P(t,f)}}}function st(e){let t,n,r,s,_;function f(o){e[14](o)}function i(o){e[15](o)}function u(o){e[16](o)}let a={type:e[4][Math.floor(e[34]/8)][e[34]%8].figure,team:e[4][Math.floor(e[34]/8)][e[34]%8].team,position:{x:e[34]%8,y:Math.floor(e[34]/8)},move_to:e[4][Math.floor(e[34]/8)][e[34]%8].move_to,own_team:e[0]};return e[1]!==void 0&&(a.current_team=e[1]),e[4]!==void 0&&(a.field_array=e[4]),e[2]!==void 0&&(a.moved=e[2]),t=new D({props:a}),y.push(()=>k(t,"current_team",f)),y.push(()=>k(t,"field_array",i)),y.push(()=>k(t,"moved",u)),{c(){q(t.$$.fragment)},m(o,l){L(t,o,l),_=!0},p(o,l){const g={};l[0]&16&&(g.type=o[4][Math.floor(o[34]/8)][o[34]%8].figure),l[0]&16&&(g.team=o[4][Math.floor(o[34]/8)][o[34]%8].team),l[0]&16&&(g.move_to=o[4][Math.floor(o[34]/8)][o[34]%8].move_to),l[0]&1&&(g.own_team=o[0]),!n&&l[0]&2&&(n=!0,g.current_team=o[1],M(()=>n=!1)),!r&&l[0]&16&&(r=!0,g.field_array=o[4],M(()=>r=!1)),!s&&l[0]&4&&(s=!0,g.moved=o[2],M(()=>s=!1)),t.$set(g)},i(o){_||(p(t.$$.fragment,o),_=!0)},o(o){b(t.$$.fragment,o),_=!1},d(o){P(t,o)}}}function _t(e){let t,n,r;function s(f){e[13](f)}let _={origin:e[4][Math.floor(e[34]/8)][e[34]%8].origin,position:{x:e[34]%8,y:Math.floor(e[34]/8)},$$slots:{default:[gt]},$$scope:{ctx:e}};return e[4]!==void 0&&(_.field_array=e[4]),t=new X({props:_}),y.push(()=>k(t,"field_array",s)),{c(){q(t.$$.fragment)},m(f,i){L(t,f,i),r=!0},p(f,i){const u={};i[0]&16&&(u.origin=f[4][Math.floor(f[34]/8)][f[34]%8].origin),i[0]&23|i[1]&16&&(u.$$scope={dirty:i,ctx:f}),!n&&i[0]&16&&(n=!0,u.field_array=f[4],M(()=>n=!1)),t.$set(u)},i(f){r||(p(t.$$.fragment,f),r=!0)},o(f){b(t.$$.fragment,f),r=!1},d(f){P(t,f)}}}function at(e){let t="",n,r,s=e[4][Math.floor(e[34]/8)][e[34]%8].is_highlight,_,f,i=s&&he(e);return{c(){n=W(t),r=J(),i&&i.c(),_=ie()},m(u,a){S(u,n,a),S(u,r,a),i&&i.m(u,a),S(u,_,a),f=!0},p(u,a){a[0]&16&&(s=u[4][Math.floor(u[34]/8)][u[34]%8].is_highlight),s?i?(i.p(u,a),a[0]&16&&p(i,1)):(i=he(u),i.c(),p(i,1),i.m(_.parentNode,_)):i&&(Q(),b(i,1,1,()=>{i=null}),G())},i(u){f||(p(i),f=!0)},o(u){b(i),f=!1},d(u){u&&(O(n),O(r),O(_)),i&&i.d(u)}}}function gt(e){let t,n,r,s,_;function f(o){e[10](o)}function i(o){e[11](o)}function u(o){e[12](o)}let a={type:e[4][Math.floor(e[34]/8)][e[34]%8].figure,team:e[4][Math.floor(e[34]/8)][e[34]%8].team,position:{x:e[34]%8,y:Math.floor(e[34]/8)},move_to:e[4][Math.floor(e[34]/8)][e[34]%8].move_to,own_team:e[0]};return e[1]!==void 0&&(a.current_team=e[1]),e[4]!==void 0&&(a.field_array=e[4]),e[2]!==void 0&&(a.moved=e[2]),t=new D({props:a}),y.push(()=>k(t,"current_team",f)),y.push(()=>k(t,"field_array",i)),y.push(()=>k(t,"moved",u)),{c(){q(t.$$.fragment)},m(o,l){L(t,o,l),_=!0},p(o,l){const g={};l[0]&16&&(g.type=o[4][Math.floor(o[34]/8)][o[34]%8].figure),l[0]&16&&(g.team=o[4][Math.floor(o[34]/8)][o[34]%8].team),l[0]&16&&(g.move_to=o[4][Math.floor(o[34]/8)][o[34]%8].move_to),l[0]&1&&(g.own_team=o[0]),!n&&l[0]&2&&(n=!0,g.current_team=o[1],M(()=>n=!1)),!r&&l[0]&16&&(r=!0,g.field_array=o[4],M(()=>r=!1)),!s&&l[0]&4&&(s=!0,g.moved=o[2],M(()=>s=!1)),t.$set(g)},i(o){_||(p(t.$$.fragment,o),_=!0)},o(o){b(t.$$.fragment,o),_=!1},d(o){P(t,o)}}}function he(e){let t,n,r;function s(f){e[9](f)}let _={origin:e[4][Math.floor(e[34]/8)][e[34]%8].origin,position:{x:e[34]%8,y:Math.floor(e[34]/8)}};return e[4]!==void 0&&(_.field_array=e[4]),t=new X({props:_}),y.push(()=>k(t,"field_array",s)),{c(){q(t.$$.fragment)},m(f,i){L(t,f,i),r=!0},p(f,i){const u={};i[0]&16&&(u.origin=f[4][Math.floor(f[34]/8)][f[34]%8].origin),!n&&i[0]&16&&(n=!0,u.field_array=f[4],M(()=>n=!1)),t.$set(u)},i(f){r||(p(t.$$.fragment,f),r=!0)},o(f){b(t.$$.fragment,f),r=!1},d(f){P(t,f)}}}function ce(e){let t,n,r,s;const _=[it,ot],f=[];function i(u,a){return(u[34]+Math.floor(u[34]/8))%2==0?0:1}return t=i(e),n=f[t]=_[t](e),{c(){n.c(),r=ie()},m(u,a){f[t].m(u,a),S(u,r,a),s=!0},p(u,a){n.p(u,a)},i(u){s||(p(n),s=!0)},o(u){b(n),s=!1},d(u){u&&O(r),f[t].d(u)}}}function me(e){let t,n,r,s,_;return{c(){t=E("div"),n=E("div"),r=E("button"),r.textContent="Join",v(r,"class","overlay-text svelte-9e2cii"),v(n,"class","overlay-container svelte-9e2cii"),v(t,"class","GameOverScreen svelte-9e2cii")},m(f,i){S(f,t,i),j(t,n),j(n,r),s||(_=re(r,"click",e[25]),s=!0)},p:B,d(f){f&&O(t),s=!1,_()}}}function ht(e){let t,n,r,s,_,f,i=_e({length:64}),u=[];for(let l=0;l<i.length;l+=1)u[l]=ce(ae(e,i,l));const a=l=>b(u[l],1,1,()=>{u[l]=null});let o=e[3]&&me(e);return{c(){t=E("main"),n=E("div"),r=E("div");for(let l=0;l<u.length;l+=1)u[l].c();s=J(),_=E("div"),o&&o.c(),v(r,"class","chess-board svelte-9e2cii"),v(n,"class","board-container svelte-9e2cii")},m(l,g){S(l,t,g),j(t,n),j(n,r);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(r,null);j(t,s),j(t,_),o&&o.m(_,null),f=!0},p(l,g){if(g[0]&23){i=_e({length:64});let m;for(m=0;m<i.length;m+=1){const A=ae(l,i,m);u[m]?(u[m].p(A,g),p(u[m],1)):(u[m]=ce(A),u[m].c(),p(u[m],1),u[m].m(r,null))}for(Q(),m=i.length;m<u.length;m+=1)a(m);G()}l[3]?o?o.p(l,g):(o=me(l),o.c(),o.m(_,null)):o&&(o.d(1),o=null)},i(l){if(!f){for(let g=0;g<i.length;g+=1)p(u[g]);f=!0}},o(l){u=u.filter(Boolean);for(let g=0;g<u.length;g+=1)b(u[g]);f=!1},d(l){l&&O(t),Ge(u,l),o&&o.d()}}}function ct(e,t,n){let r,s;const _=nt(),f=_.getResponse();Fe(e,f,h=>n(8,s=h));let i;function u(h){if(console.log("message: "+h),h=="black")n(0,i="black"),m("black"),A("white");else if(h=="white")n(0,i="white"),m("white"),A("black");else if(h!="none")if(h==0)console.log("0");else{let w=JSON.parse(h);console.log("move enemy"),i!=w.team&&(console.log(w),n(4,c[w.old_pos.y][w.old_pos.x].move_to={bool:!0,pos:w.new_pos},c),n(4,c))}}let a=!0,o="white",l={bool:!1,old_pos:{y:0,x:0},new_pos:{y:0,x:0}};function g(h){h=="which team"&&n(3,a=!1),_.sendMessage(h)}function m(h){for(let w=0;w<8;w++)n(4,c[6][w]={figure:"Pawn",team:h,move_to:{bool:!1}},c);n(4,c[7][0]={figure:"Rook",team:h,move_to:{bool:!1}},c),n(4,c[7][7]={figure:"Rook",team:h,move_to:{bool:!1}},c),n(4,c[7][1]={figure:"Knight",team:h,move_to:{bool:!1}},c),n(4,c[7][6]={figure:"Knight",team:h,move_to:{bool:!1}},c),n(4,c[7][2]={figure:"Bishop",team:h,move_to:{bool:!1}},c),n(4,c[7][5]={figure:"Bishop",team:h,move_to:{bool:!1}},c),n(4,c[7][3]={figure:"Queen",team:h,move_to:{bool:!1}},c),n(4,c[7][4]={figure:"King",team:h,move_to:{bool:!1}},c)}function A(h){for(let w=0;w<8;w++)n(4,c[1][w]={figure:"Pawn",team:h,move_to:{bool:!1}},c);n(4,c[0][0]={figure:"Rook",team:h,move_to:{bool:!1}},c),n(4,c[0][7]={figure:"Rook",team:h,move_to:{bool:!1}},c),n(4,c[0][1]={figure:"Knight",team:h,move_to:{bool:!1}},c),n(4,c[0][6]={figure:"Knight",team:h,move_to:{bool:!1}},c),n(4,c[0][2]={figure:"Bishop",team:h,move_to:{bool:!1}},c),n(4,c[0][5]={figure:"Bishop",team:h,move_to:{bool:!1}},c),n(4,c[0][3]={figure:"Queen",team:h,move_to:{bool:!1}},c),n(4,c[0][4]={figure:"King",team:h,move_to:{bool:!1}},c)}let c=[];for(let h=0;h<8;h++){c.push([]);for(let w=0;w<8;w++)c[h].push({figure:"none",move_to:{bool:!1},is_highlight:!1})}c=c;function Y(h){c=h,n(4,c)}function Z(h){o=h,n(1,o),n(2,l),n(0,i)}function d(h){c=h,n(4,c)}function N(h){l=h,n(2,l),n(0,i),n(1,o)}function we(h){c=h,n(4,c)}function ve(h){o=h,n(1,o),n(2,l),n(0,i)}function Me(h){c=h,n(4,c)}function ke(h){l=h,n(2,l),n(0,i),n(1,o)}function Oe(h){c=h,n(4,c)}function Ee(h){o=h,n(1,o),n(2,l),n(0,i)}function Se(h){c=h,n(4,c)}function Ne(h){l=h,n(2,l),n(0,i),n(1,o)}function je(h){c=h,n(4,c)}function Ae(h){o=h,n(1,o),n(2,l),n(0,i)}function Be(h){c=h,n(4,c)}function Le(h){l=h,n(2,l),n(0,i),n(1,o)}const Pe=()=>g("which team");return e.$$.update=()=>{if(e.$$.dirty[0]&256&&n(7,r=s.toString()),e.$$.dirty[0]&128&&u(r),e.$$.dirty[0]&7&&l.bool){console.log("moved");let h=JSON.stringify({team:i,old_pos:{y:Math.abs(l.old_pos.y-7),x:Math.abs(l.old_pos.x-7)},new_pos:{y:Math.abs(l.new_pos.y-7),x:Math.abs(l.new_pos.x-7)}});g(h),o=="white"?n(1,o="black"):o=="black"&&n(1,o="white"),n(2,l.bool=!1,l)}},[i,o,l,a,c,f,g,r,s,Y,Z,d,N,we,ve,Me,ke,Oe,Ee,Se,Ne,je,Ae,Be,Le,Pe]}class mt extends ue{constructor(t){super(),le(this,t,ct,ht,V,{},null,[-1,-1])}}new mt({target:document.getElementById("app")});
